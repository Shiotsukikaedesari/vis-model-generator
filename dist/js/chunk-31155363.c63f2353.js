(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31155363"],{"1c79":function(t,e,a){},"32f8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material-container"},[a("drag-plane",{attrs:{amount:2,width:"100%",height:t.height+"px",showDragsign:!1},scopedSlots:t._u([{key:"view1",fn:function(){return[a("div",{staticClass:"box-header"},[a("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-search",placeholder:"材质筛选"}}),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.addMaterial}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus-outline",type:"primary"}},[t._v(" 添加材质 ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.material,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:e},domProps:{textContent:t._s(e.label)}})})),1)],1)],1),a("div",{staticClass:"box-container"},[a("div",{staticClass:"material-main"},t._l(t.materialList,(function(e,i){return a("div",{key:i,staticClass:"material-elem",on:{mousedown:function(){t.$store.commit("material/setCurrentMaterial",e.vid)}}},[a("div",{ref:e.vid,refInFor:!0,staticClass:"render-box",class:{active:t.currentMaterial.vid===e.vid},attrs:{draggable:"true",id:e.vid},on:{dragstart:function(a){return t.dragstart(a,e.vid)}}}),a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"删除",expression:"'删除'",modifiers:{top:!0}}],staticClass:"operate-box"},[a("vis-icon",{attrs:{code:"#iconshanchu"}})],1),a("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.vid,expression:"item.vid",modifiers:{bottom:!0}}],staticClass:"element-title",domProps:{textContent:t._s(e.vid)}})])})),0)])]},proxy:!0},{key:"view2",fn:function(){return[a("material-setting-module")]},proxy:!0}])})],1)},n=[],o=(a("a9e3"),a("ec26")),r=a("6fab"),s=a("35bb"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"materialSettingModule-container"},[t.config?a("collapse-layout",{attrs:{label:"材质",icon:"#iconcaizhishezhi",arrowPosition:"left"},scopedSlots:t._u([{key:"container",fn:function(){return[a("vis-controller-input",{attrs:{keyframe:!1,label:"类型",disabled:""},model:{value:t.config.label,callback:function(e){t.$set(t.config,"label",e)},expression:"config.label"}})]},proxy:!0}],null,!1,2045396974)}):t._e(),a(t.type,{tag:"components",attrs:{config:t.config}})],1)},l=[],d=(a("d3b7"),a("3ca3"),a("ddb0"),a("597a")),u=function(){return a.e("chunk-40d6be3a").then(a.bind(null,"01fa"))},m=function(){return a.e("chunk-75277101").then(a.bind(null,"4e96"))},p={components:{collapseLayout:d["a"],MeshStandardMaterial:u,VisMeshPhysicalMaterial:m},computed:{config:function(){return this.$store.getters["material/currentMaterial"]},type:function(){var t;return null===(t=this.config)||void 0===t?void 0:t.type}},methods:{}},f=p,v=(a("4e9a"),a("2877")),h=Object(v["a"])(f,c,l,!1,null,"1538915e",null),g=h.exports,b=a("fe9e"),y={components:{dragPlane:r["a"],materialSettingModule:g},props:{height:{type:Number}},data:function(){return{material:[{icon:"#icondengpao",label:"标准网格材质",material:b["a"].MESHSTANDARDMATERIAL}],displayerMap:{},watchMap:{},timer:"",throttleTime:1e3/45,canMove:!0}},computed:{materialList:function(){return this.$store.getters["material/get"]},currentMaterial:function(){return this.$store.getters["material/currentMaterial"]}},methods:{dragstart:function(t,e){var a=this;t.preventDefault(),this.$store.commit("material/setDraggedMaterial",e);var i=t.target,n=i.getElementsByTagName("canvas");if(n.length>0){this.$store.commit("material/dragging",!0);var o=n[0],r=new Image;r.src=o.toDataURL("image/png"),r.style.position="fixed",r.style.zIndex=20,r.style.opacity=.6,document.body.appendChild(r);var s=function(t){a.canMove&&(a.canMove=!1,a.timer=setTimeout((function(){r.style.top="".concat(t.clientY+10,"px"),r.style.left="".concat(t.clientX+10,"px"),a.canMove=!0}),a.throttleTime))},c=function t(e){document.body.removeChild(r),document.body.removeEventListener("mousemove",s),document.body.removeEventListener("mouseup",t)};document.body.addEventListener("mousemove",s),document.body.addEventListener("mouseup",c)}else console.error("can not found canvas in this dom")},addMaterial:function(t){var e=this,a=Object(b["n"])(t.material,{vid:Object(o["a"])()});this.$store.commit("material/add",a),this.$store.commit("material/setCurrentMaterial",a.vid),this.$nextTick((function(){var t=a.vid;if(!e.$refs[t])return console.error("can not found this dom: '".concat(t,"'")),!1;var i=new b["f"]({dom:e.$refs[t][0],material:s["a"].compilerManager.getMaterial(t)});i.render(),e.displayerMap[t]=i,e.watchMap[t]=e.$watch((function(){return this.materialList[t]}),(function(a){e.displayerMap[t].render()}),{deep:!0})}))}}},M=y,w=(a("f798"),Object(v["a"])(M,i,n,!1,null,"1e3c64e2",null));e["default"]=w.exports},"4e9a":function(t,e,a){"use strict";a("e851")},e851:function(t,e,a){},f798:function(t,e,a){"use strict";a("1c79")}}]);