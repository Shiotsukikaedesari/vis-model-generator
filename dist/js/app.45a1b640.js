(function(e){function t(t){for(var n,r,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},r={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-1c0179e8":"0045b9db","chunk-228d6b24":"f27d20b3","chunk-282680d7":"3fe88f5a","chunk-2c658028":"8320c33d","chunk-45fa425a":"8a4bd71f","chunk-89bcfff0":"38405e2a","chunk-98d0c8a8":"b3ec65f7","chunk-83f1e74e":"e5b0cfb3","chunk-a73f6972":"b37b37b6","chunk-40d6be3a":"accfb430","chunk-4e41bab0":"e0f925b3"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-1c0179e8":1,"chunk-228d6b24":1,"chunk-282680d7":1,"chunk-2c658028":1,"chunk-45fa425a":1,"chunk-89bcfff0":1,"chunk-98d0c8a8":1,"chunk-83f1e74e":1,"chunk-a73f6972":1,"chunk-40d6be3a":1,"chunk-4e41bab0":1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-1c0179e8":"0f1ebd64","chunk-228d6b24":"f9de8424","chunk-282680d7":"123802a2","chunk-2c658028":"379b79eb","chunk-45fa425a":"5d95fa42","chunk-89bcfff0":"5499f995","chunk-98d0c8a8":"d250e2b0","chunk-83f1e74e":"cd85d344","chunk-a73f6972":"87a24ded","chunk-40d6be3a":"dbe20943","chunk-4e41bab0":"dbe20943"}[e]+".css",i=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===i))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){u=p[s],l=u.getAttribute("data-href");if(l===n||l===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete r[e],d.parentNode.removeChild(d),a(o)},d.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){r[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",p.name="ChunkLoadError",p.type=n,p.request=r,a[1](p)}i[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0af4":function(e,t,a){},"0e68":function(e,t,a){"use strict";a.r(t),a.d(t,"textureDataSupport",(function(){return i})),a.d(t,"module",(function(){return e}));a("d81d"),a("d3b7"),a("159b");var n=a("a026"),r=a("fe9e"),i=new r["p"](n["default"].observable({}));e={namespaced:!0,state:{map:i.getData(),module:r["g"].TEXTURE,currentTexture:""},getters:{get:function(e){return e.map},currentTexture:function(e){return e.currentTexture}},mutations:{add:function(e,t){var a=n["default"].observable(t);e.map[a.vid]=a,e.map.__ob__.dep.notify(),this.commit("texture/setCurrentTexture",t.vid)},setCurrentTexture:function(e,t){e.currentTexture=e.map[t]},remove:function(e,t){delete e.map[t],this.commit("attribute/remove",t)},change:function(e,t){var a=t.path,n=void 0===a?[]:a,r=t.key,i=t.value,o=e.map;n.forEach((function(e){o=o[e]})),o[r]=i}},actions:{}}},1048:function(e,t,a){},"159c":function(e,t,a){"use strict";a("184e")},"17a9":function(e,t,a){},"184e":function(e,t,a){},"19a7":function(e,t,a){"use strict";a("17a9")},"1dd2":function(e,t,a){},"1f99":function(e,t,a){},"2d01":function(e,t,a){"use strict";a("1048")},"2dbf":function(e,t,a){"use strict";a("4f6b")},3118:function(e,t,a){"use strict";a("f458")},3390:function(e,t,a){"use strict";a("65bb")},"35bb":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a("fe9e"),r=a("ec26"),i=a("80fa"),o=a("a991"),s=a("98ba"),c=a("0e68"),u=new n["o"],l=new n["f"](u.create(n["g"].LIGHT).add(Object(n["r"])("AmbientLight",{vid:Object(r["a"])()})).add(Object(n["r"])("PointLight",{vid:Object(r["a"])(),position:{x:50,z:50,y:100},distance:300})).get()),p=new n["l"](u.create(n["g"].RENDERER).add(Object(n["r"])("WebGLRenderer",{clearColor:"rgba(15, 15, 15, 1)"})).get()),d=new n["d"]({cameraDataSupport:new n["b"],lightDataSupport:l,geometryDataSupport:i["geometryDataSupport"],modelDataSupport:s["modelDataSupport"],textureDataSupport:c["textureDataSupport"],materialDataSupport:o["materialDataSupport"],rendererDataSupport:p,sceneDataSupport:new n["n"],controlsDataSupport:new n["c"]}),h=new n["k"]({dataSupportManager:d});console.log(h)},"3a46":function(e,t,a){},"3c0e":function(e,t,a){},"3efc":function(e,t,a){"use strict";a("b036")},4360:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("159b"),a("ddb0"),a("ac1f"),a("5319"),a("1276");var n=a("a026"),r=a("2f62");n["default"].use(r["a"]);var i=a("89d3"),o={};i.keys().forEach((function(e){"./index.js"!==e&&(o[e.split("/").pop().replace(/.\/|\.js$/g,"")]=i(e).module)})),t["default"]=new r["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:o})},"4c7e":function(e,t,a){},"4f6b":function(e,t,a){},"53d2":function(e,t,a){"use strict";a("3a46")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("b0c0");var n,r,i=a("5c96"),o=a.n(i),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-container",style:{"font-size":e.size,color:e.color}},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":e.code}})])])},c=[],u={name:"vis-icon",props:{code:{type:String},size:{type:String},color:{type:String}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){}},l=u,p=(a("19a7"),a("2877")),d=Object(p["a"])(l,s,c,!1,null,null,null),h=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-image",{staticClass:"vis-image",style:{width:e.width,height:e.height},attrs:{src:e.src}},[a("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[a("img",{attrs:{src:"/image/loading.gif",alt:"加载中"}})]),a("div",{attrs:{slot:"error"},slot:"error"},[a("img",{attrs:{src:"/image/error.png",alt:"加载失败"}})])])},m=[],v={name:"vis-image",props:{src:{type:String},fit:{type:String,default:"cover"},width:{type:String,default:"100%"},height:{type:String,default:"100%"}},data:function(){return{}},mounted:function(){},beforeDestroy:function(){}},g=v,b=(a("53d2"),Object(p["a"])(g,f,m,!1,null,null,null)),y=b.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("div",{staticClass:"color-controller"},[a("el-input",{attrs:{size:"mini"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),a("el-color-picker",{attrs:{size:"mini","show-alpha":e.showAlpha,"color-format":e.colorFormat},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},M=[],j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controlLayout-container"},[a("div",{staticClass:"config-title",domProps:{textContent:e._s(e.label)}}),a("div",{staticClass:"config-component"},[e._t("controller")],2)])},w=[],E={props:{label:{type:String,default:"标签"}},data:function(){return{watcher:""}},computed:{},methods:{}},S=E,C=(a("8bde"),Object(p["a"])(S,j,w,!1,null,"b79357a0",null)),x=C.exports,k={name:"vis-controller-picker",components:{controlLayout:x},props:{label:{type:String,default:"标签"},colorFormat:{type:String,default:"rgb"},showAlpha:{type:Boolean,default:!1},value:null},data:function(){return{type:"color",active:!1}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{}},L=k,R=(a("3118"),Object(p["a"])(L,O,M,!1,null,"0210579a",null)),T=R.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,displayAccuracy:e.displayAccuracy},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]},proxy:!0}])})},A=[],P=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"number-controller",class:{"draging-box":e.draging}},[e.showButton?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.draging,expression:"!draging"}],staticClass:"operate-button reduce-button",on:{click:function(){e.calcValue(-1)}}},[a("vis-icon",{attrs:{code:"#iconbianjiantouzuo"}})],1):e._e(),a("div",{staticClass:"input-box",on:{mousedown:function(t){return t.stopPropagation(),e.mousedown.apply(null,arguments)}}},[e.editing?a("input",{ref:"input",staticClass:"input-elem",attrs:{type:"text"},domProps:{value:e.inputValue},on:{change:e.inputChange}}):a("span",{staticClass:"input-elem",domProps:{textContent:e._s(""+e.inputValue+e.unit)}})]),e.showButton?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.draging,expression:"!draging"}],staticClass:"operate-button add-button",on:{click:function(){e.calcValue(1)}}},[a("vis-icon",{attrs:{code:"#iconbianjiantouyou"}})],1):e._e()])}),N=[],H=(a("b680"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),{props:{step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},showButton:{type:Boolean,default:!0},throttleTime:{type:Number,default:40},value:{type:Number}},data:function(){return{editing:!1,draging:!1,throttleTimer:"",editTimer:"",editJudgeTime:300,lastPosition:"",canMove:!0}},computed:{inputValue:{get:function(){return void 0!==this.displayAccuracy?this.value.toFixed(this.displayAccuracy):this.value},set:function(e){this.$emit("input",e)}}},methods:{mousedown:function(e){var t=this;if(this.editing)return!1;if(this.editTimer){clearTimeout(this.editTimer),this.editTimer="",this.editing=!0,this.$emit("touchEdit");var a=function e(){t.editing=!1,document.removeEventListener("mousedown",e)};document.addEventListener("mousedown",a)}else this.editTimer=setTimeout((function(){t.editing=!1,t.editTimer="",t.dragStart(e)}),this.editJudgeTime)},dragStart:function(e){var t=this;this.draging=!0,document.body.style.cursor="ew-resize",this.lastPosition=e.clientX;var a=function(a){if(!t.canMove)return!1;t.canMove=!1,t.throttleTimer=setTimeout((function(){var n=a.clientX,r=n-t.lastPosition<0?-1:1;t.calcValue(r),t.lastPosition=n,t.$emit("draging",{event:e}),t.canMove=!0}),t.throttleTime)},n=function e(){document.body.style.cursor="default",t.draging=!1,t.$emit("dragEnd"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",n),this.$emit("dragStart",{event:e})},calcValue:function(e){var t=this.step<1?this.step.toString().split(".")[1].length:1,a=this.draging?e*this.step*this.dragMultply:e*this.step;this.checkValue(Number((this.value+a).toFixed(t)))},inputChange:function(e){this.checkValue(Number(this.$refs.input.value))},checkValue:function(e){Number(e)<this.min?e=this.min:Number(e)>this.max&&(e=this.max),this.inputValue=Number(e)}}}),G=H,z=(a("8da5"),Object(p["a"])(G,P,N,!1,null,"fb1fa9ba",null)),I=z.exports,V={name:"vis-controller-number",components:{controlLayout:x,numberController:I},props:{label:{type:String,default:"标签"},step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},throttleTime:{type:Number,default:40},value:null},data:function(){return{type:"number",active:!1}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{}},B=V,_=Object(p["a"])(B,D,A,!1,null,"3bbfd933",null),F=_.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("div",{staticClass:"color-controller"},[a("el-input",{attrs:{size:"mini",disabled:e.disabled},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},U=[],Y={name:"vis-controller-input",components:{controlLayout:x},props:{label:{type:String,default:"标签"},disabled:{type:Boolean,default:!1},value:null},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},$=Y,X=(a("f0f9"),Object(p["a"])($,W,U,!1,null,"146570fc",null)),J=X.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("div",{staticClass:"switch-controller"},[a("el-switch",{attrs:{size:"mini"},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)]},proxy:!0}])})},q=[],K={name:"vis-controller-switch",components:{controlLayout:x},props:{label:{type:String,default:"标签"},value:null},data:function(){return{type:"boolean"}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{}},Q=K,ee=(a("94cd"),Object(p["a"])(Q,Z,q,!1,null,"5136758a",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("div",{staticClass:"select-controller"},[a("el-select",{attrs:{value:e.value,size:"mini",placeholder:e.placeholder},on:{change:e.change}},e._l(e.options,(function(t,n){return a("el-option",{key:n,attrs:{label:t[e.prop.label],value:e.prop.value?t[e.prop.value]:t}})})),1)],1)]},proxy:!0}])})},ne=[],re={name:"vis-controller-select",components:{controlLayout:x},props:{label:{type:String,default:"标签"},placeholder:{type:String,default:"请选择"},prop:{type:Object,default:function(){return{label:"label",value:"value"}}},options:Array,value:null},data:function(){return{}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{change:function(e){this.inputValue=e}}},ie=re,oe=(a("7a53"),Object(p["a"])(ie,ae,ne,!1,null,"73525e9c",null)),se=oe.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("control-layout",{attrs:{label:e.label},scopedSlots:e._u([{key:"controller",fn:function(){return[a("div",{staticClass:"vector3-controller"},[a("span",{domProps:{textContent:e._s(e.elemLabel.x)}}),a("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.xValue,callback:function(t){e.xValue=t},expression:"xValue"}}),a("span",{domProps:{textContent:e._s(e.elemLabel.y)}}),a("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.yValue,callback:function(t){e.yValue=t},expression:"yValue"}}),a("span",{domProps:{textContent:e._s(e.elemLabel.z)}}),a("number-controller",{attrs:{step:e.step,dragMultply:e.dragMultply,min:e.min,max:e.max,unit:e.unit,showButton:!1,displayAccuracy:e.displayAccuracy},model:{value:e.zValue,callback:function(t){e.zValue=t},expression:"zValue"}})],1)]},proxy:!0}])})},ue=[],le={name:"vis-controller-vector3",components:{controlLayout:x,numberController:I},props:{keyframe:{type:Boolean,default:!0},animation:{type:Object},label:{type:String,default:"标签"},elemLabel:{type:Object,default:function(){return{x:"X",y:"Y",z:"Z"}}},step:{type:Number,default:1},dragMultply:{type:Number,default:1},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},unit:{type:String,default:""},displayAccuracy:{type:Number},throttleTime:{type:Number,default:40},value:null},data:function(){return{type:"vector3",active:!1}},computed:{xValue:{get:function(){return"°"===this.unit?180*this.value.x/Math.PI:this.value.x},set:function(e){this.value.x="°"===this.unit?e*Math.PI/180:e}},yValue:{get:function(){return"°"===this.unit?180*this.value.y/Math.PI:this.value.y},set:function(e){this.value.y="°"===this.unit?e*Math.PI/180:e}},zValue:{get:function(){return"°"===this.unit?180*this.value.z/Math.PI:this.value.z},set:function(e){this.value.z="°"===this.unit?e*Math.PI/180:e}}},methods:{}},pe=le,de=(a("3390"),Object(p["a"])(pe,ce,ue,!1,null,"6878258c",null)),he=de.exports,fe=function(e){e.component(h.name,h),e.component(y.name,y),e.component(T.name,T),e.component(F.name,F),e.component(J.name,J),e.component(te.name,te),e.component(se.name,se),e.component(he.name,he)},me=(a("0fae"),a("5488")),ve=a.n(me),ge=(a("4c7e"),a("1dd2"),a("1f99"),a("77ed"),a("caf9")),be=a("e37d"),ye=a("a026"),Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("editor-frame"),a("loading-manager")],1)},Me=[],je=(a("3ca3"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eidtor-container"},[a("div",{staticClass:"top-area",style:{height:e.topAreaSetting.size+"px"}},[a("top-navigation")],1),a("div",{staticClass:"middle-area",style:{height:e.middleAreaHeight+"px"}},[a("drag-trans-box",{attrs:{rightDrag:"",size:e.leftAreaSetting.size},on:{draging:function(t){return e.draging(t,e.leftAreaSetting)},draged:function(){e.leftAreaSetting.bufferSize=e.leftAreaSetting.size}}},[a("object-library")],1),a("div",{staticClass:"three-vis",style:{width:e.threeVisWidth+"px",height:e.middleAreaHeight+"px"}},[a("render-window")],1)],1)])}),we=[],Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dragTransBox-contaner",style:{width:e.leftDrag||e.rightDrag?e.size+"px":e.width,height:e.topDrag||e.bottomDrag?e.size+"px":e.height}},[e.topDrag?a("div",{staticClass:"dragBox-topDrag",on:{mousedown:function(t){return e.dragStart(t,"top")}}},[a("dragSignalRow")],1):e._e(),a("div",{staticClass:"dragBox-middleBox",style:{height:e.topDrag?"calc(100% - 20px)":"100%"}},[e.leftDrag?a("div",{staticClass:"dragBox-leftDrag",on:{mousedown:function(t){return e.dragStart(t,"left")}}},[a("dragSignalColumn")],1):e._e(),a("div",{staticClass:"dragBox-display"},[e._t("default")],2),e.rightDrag?a("div",{staticClass:"dragBox-rightDrag",on:{mousedown:function(t){return e.dragStart(t,"right")}}},[a("dragSignalColumn")],1):e._e()]),e.bottomDrag?a("div",{staticClass:"dragBox-bottomDrag",on:{mousedown:function(t){return e.dragStart(t,"bottom")}}},[a("dragSignalRow")],1):e._e()])},Se=[],Ce={props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},topDrag:{type:Boolean,default:!1},leftDrag:{type:Boolean,default:!1},rightDrag:{type:Boolean,default:!1},bottomDrag:{type:Boolean,default:!1},size:{type:Number,default:100},throttle:{type:Boolean,default:!0},throttleTime:{type:Number,default:1e3/30}},components:{dragSignalRow:{template:'\n      <div class="dragBox-dragSignalRow">\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n      '},dragSignalColumn:{template:'\n      <div class="dragBox-dragSignalColumn">\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n      '}},data:function(){return{timer:"",canMove:!0}},methods:{dragStart:function(e,t){var a=this,n=function(n){if(document.body.style.cursor=a.topDrag||a.bottomDrag?"ns-resize":"ew-resize",!a.canMove)return!1;a.timer=setTimeout((function(){var r=e.clientX,i=e.clientY,o=n.clientY,s=n.clientX,c={left:r-s,right:-(r-s),top:i-o,bottom:-(i-o)};a.$emit("draging",c[t]),a.canMove=!0}),a.throttleTime)},r=function e(){document.body.style.cursor="default",a.$emit("draged"),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}}},xe=Ce,ke=(a("84da"),Object(p["a"])(xe,Ee,Se,!1,null,"b56e4288",null)),Le=ke.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"renderElement",staticClass:"renderWindow-container"},[a("iframe",{ref:"renderMask",staticClass:"render-mask",attrs:{width:"100%",height:"100%",scrolling:"no"}}),a("position-layout-box",{staticClass:"bottom-function-box",attrs:{offsetX:5,offsetY:5,isBottom:!0},scopedSlots:e._u([{key:"main",fn:function(){return[a("render-viewpoint",{directives:[{name:"show",rawName:"v-show",value:e.showRenderViewPoint,expression:"showRenderViewPoint"}],attrs:{viewpoint:e.viewpoint,connector:e.sceneConnector}}),a("auxiliary-display",{attrs:{sceneConnector:e.sceneConnector,engineConnector:e.engineConnector}})]},proxy:!0}])}),a("position-layout-box",{staticClass:"top-function-box",attrs:{offsetX:5,offsetY:5},scopedSlots:e._u([{key:"main",fn:function(){return[a("performance-monitor",{attrs:{connector:e.engineConnector}})]},proxy:!0}])})],1)},Te=[],De=a("d4ec"),Ae=a("bee2"),Pe=(a("159b"),function(){function e(){Object(De["a"])(this,e)}return Object(Ae["a"])(e,[{key:"apply",value:function(e,t){var a=this;return t.forEach((function(t){void 0!==e[t]&&("function"===typeof e[t]?Object.defineProperty(a,t,{value:e[t].bind(e),configrable:!1}):Object.defineProperty(a,t,{value:e[t],configrable:!1}))})),this}}]),e}()),Ne=Pe,He=a("35bb"),Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"positionLayoutBox-container",style:{top:e.top,left:e.left,right:e.right,bottom:e.bottom}},[e._t("main",(function(){return[e._v("布局盒子")]}))],2)},ze=[],Ie={props:{offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},isBottom:{type:Boolean,default:!1},isRight:{type:Boolean,default:!1}},computed:{top:function(){return this.isBottom?"unset":"".concat(this.offsetY,"px")},bottom:function(){return this.isBottom?"".concat(this.offsetY,"px"):"unset"},left:function(){return this.isRight?"unset":"".concat(this.offsetX,"px")},right:function(){return this.isRight?"".concat(this.offsetX,"px"):"unset"}}},Ve=Ie,Be=(a("3efc"),Object(p["a"])(Ve,Ge,ze,!1,null,"0c3a16c7",null)),_e=Be.exports,Fe=function(){return a.e("chunk-2c658028").then(a.bind(null,"74f4"))},We=function(){return a.e("chunk-89bcfff0").then(a.bind(null,"bf79"))},Ue=function(){return a.e("chunk-1c0179e8").then(a.bind(null,"a9ba"))},Ye={components:{positionLayoutBox:_e,renderViewpoint:Fe,auxiliaryDisplay:We,performanceMonitor:Ue},props:{play:{type:Boolean,default:!1},viewpoint:{type:String,default:"default"}},data:function(){return{timer:"",canResize:!0,throttleTime:1e3/60,width:"",height:"",sceneConnector:"",engineConnector:"",showRenderViewPoint:!0,visTarget:""}},methods:{},mounted:function(){var e=this;this.engineConnector=(new Ne).apply(He["a"],["setSize","play","stop","setTransformControls","setStats"]),this.sceneConnector=(new Ne).apply(He["a"].scene,["setViewPoint","showAxesHelper","showGridHelper","setDisplayMode","showObjectHelper"]),this.$watch("play",(function(t){t?e.engineConnector.play():e.engineConnector.stop()}),{immediate:!0});var t=this.$refs.renderMask;t.contentWindow.addEventListener("resize",(function(){if(!e.canResize)return!1;e.canResize=!1,e.timer=setTimeout((function(){e.engineConnector.setSize(t.offsetWidth,t.offsetHeight),e.canResize=!0}),e.throttleTime)})),He["a"].setDom(this.$el).play()}},$e=Ye,Xe=(a("572e"),Object(p["a"])($e,Re,Te,!1,null,"38083695",null)),Je=Xe.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"objectLibrary",staticClass:"objectLibrary-container"},[a("side-tabs",{attrs:{flip:"",cache:""}},[a("side-tab-item",{attrs:{icon:"#iconkucunfenxi",title:"模型"}},[a("loader-mesh-library",{attrs:{height:e.planeHeight}})],1),a("side-tab-item",{attrs:{icon:"#iconcaizhi",title:"材质"}},[a("material-library",{attrs:{height:e.planeHeight}})],1),a("side-tab-item",{attrs:{icon:"#icontexture",title:"贴图"}},[a("texture-library",{attrs:{height:e.planeHeight}})],1)],1)],1)},qe=[],Ke=(a("cb29"),{props:{flip:{type:Boolean,default:!1},cache:{type:Boolean,default:!1}},data:function(){var e=new Array(this.$slots.default.length).fill(!1);return e[0]=!0,{control:e,activePlane:0}},render:function(e){var t=this,a=this.$slots.default,n=[],r=[];return a.forEach((function(a,i){a.tag&&(n.push(e("div",{class:{"tab-icon-item":!0,"active-tab-icon-item":t.control[i]},directives:[{name:"tooltip",value:"".concat(a.componentOptions.propsData.title),modifiers:{left:!t.flip,right:t.flip}}],on:{click:function(){t.control[t.activePlane]=!1,t.control[i]=!0,t.activePlane=i,t.$forceUpdate()}}},[e("vis-icon",{attrs:{code:a.componentOptions.propsData.icon}})])),t.cache?r.push(e("div",{class:"tab-container-item",style:{display:t.control[i]?"block":"none"}},[a])):t.control[i]&&r.push(e("div",{class:"tab-container-item"},[a])))})),e("div",{class:"sideTabs-container",style:{flexDirection:this.flip?"row-reverse":" row"}},[e("div",{class:"tab-icon-box"},[n]),e("div",{class:"tab-division-line"}),e("div",{class:"tab-container-box"},[r])])}}),Qe=Ke,et=(a("b7d5"),Object(p["a"])(Qe,n,r,!1,null,"64b09c72",null)),tt=et.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sideTabItem-container"},[e._t("default")],2)},nt=[],rt={name:"sideTabItem",props:{icon:{type:String},title:{type:String,default:"默认"}}},it=rt,ot=(a("2dbf"),Object(p["a"])(it,at,nt,!1,null,"23b6e558",null)),st=ot.exports,ct=function(){return a.e("chunk-228d6b24").then(a.bind(null,"3db0"))},ut=function(){return a.e("chunk-98d0c8a8").then(a.bind(null,"32f8"))},lt=function(){return a.e("chunk-45fa425a").then(a.bind(null,"c766"))},pt={components:{sideTabs:tt,sideTabItem:st,materialLibrary:ut,textureLibrary:lt,loaderMeshLibrary:ct},data:function(){return{activeName:"first",planeHeight:""}},mounted:function(){this.planeHeight=this.$refs.objectLibrary.offsetHeight}},dt=pt,ht=(a("995d"),Object(p["a"])(dt,Ze,qe,!1,null,"0d138f8d",null)),ft=ht.exports,mt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},vt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"topNavigation-container"},[a("div")])}],gt={components:{}},bt=gt,yt=(a("159c"),Object(p["a"])(bt,mt,vt,!1,null,"2d38c6de",null)),Ot=yt.exports,Mt={components:{dragTransBox:Le,objectLibrary:ft,topNavigation:Ot,renderWindow:Je},data:function(){return{topAreaSetting:{size:60},leftAreaSetting:{size:322,bufferSize:322,max:600,min:130}}},computed:{middleAreaHeight:function(){return window.innerHeight-this.topAreaSetting.size},threeVisWidth:function(){return window.innerWidth-this.leftAreaSetting.size}},watch:{},methods:{draging:function(e,t){var a=t.bufferSize+e;a<=t.min?a=t.min:a>=t.max&&(a=t.max),t.size=a},resetWindow:function(){this.leftAreaSetting={size:300,bufferSize:300,max:600,min:130}}},mounted:function(){var e=this;window.onresize=function(){e.resetWindow()}}},jt=Mt,wt=(a("2d01"),Object(p["a"])(jt,je,we,!1,null,"7dc3efd4",null)),Et=wt.exports,St=function(){return a.e("chunk-282680d7").then(a.bind(null,"3946"))},Ct={components:{editorFrame:Et,loadingManager:St},data:function(){return{}},computed:{},methods:{},mounted:function(){NProgress.done()}},xt=Ct,kt=(a("e2b9"),Object(p["a"])(xt,Oe,Me,!1,null,"21ddacd6",null)),Lt=kt.exports,Rt=a("4360"),Tt=a("5a89");a("fe9e");ye["default"].use(o.a),ye["default"].component(ve.a.name,ve.a),ye["default"].use(fe),ye["default"].use(be["a"]),ye["default"].use(ge["a"],{error:"/image/error.png",loading:"/image/loading.gif",silent:!1}),ye["default"].config.productionTip=!1,new ye["default"]({store:Rt["default"],render:function(e){return e(Lt)}}).$mount("#app"),He["a"].load({assets:["/resource/skyBox/snowScene/nx.jpg","/resource/skyBox/snowScene/ny.jpg","/resource/skyBox/snowScene/nz.jpg","/resource/skyBox/snowScene/px.jpg","/resource/skyBox/snowScene/py.jpg","/resource/skyBox/snowScene/pz.jpg"]},(function(e){var t=e.resourceMap,a=new Tt["b"];a.images=[t.get("/resource/skyBox/snowScene/px.jpg"),t.get("/resource/skyBox/snowScene/nx.jpg"),t.get("/resource/skyBox/snowScene/py.jpg"),t.get("/resource/skyBox/snowScene/ny.jpg"),t.get("/resource/skyBox/snowScene/pz.jpg"),t.get("/resource/skyBox/snowScene/nz.jpg")],a.needsUpdate=!0,He["a"].scene.background=a,He["a"].scene.environment=a})),He["a"].eventManager.addEventListener("pointerup",(function(e){if(0===e.button){if(e.intersections&&e.intersections.length){var t=e.intersections[0].object;if(t.isMesh){var a=He["a"].compilerManager.getObjectVid(t);Rt["default"].commit("model/setCurrentModel",a)}}Rt["default"].getters["material/draggedMaterial"]&&(Rt["default"].commit("model/setMaterial",{vid:Rt["default"].getters["model/currentModel"].vid,value:Rt["default"].getters["material/draggedMaterial"]}),Rt["default"].commit("material/setDraggedMaterial",""))}}))},"572e":function(e,t,a){"use strict";a("ed7d")},"65bb":function(e,t,a){},"6da2":function(e,t,a){},"6ffb":function(e,t,a){},"77bf":function(e,t,a){},"7a53":function(e,t,a){"use strict";a("6da2")},"80fa":function(e,t,a){"use strict";a.r(t),a.d(t,"geometryDataSupport",(function(){return i})),a.d(t,"module",(function(){return e}));a("d81d"),a("d3b7"),a("159b");var n=a("a026"),r=a("fe9e"),i=new r["e"](n["default"].observable({}));e={namespaced:!0,state:{map:i.getData(),module:r["g"].GEOMETRY,currentGeometry:""},getters:{get:function(e){return e.map},currentGeometry:function(e){return e.currentGeometry}},mutations:{add:function(e,t){var a=n["default"].observable(t);e.map[a.vid]=a,e.map.__ob__.dep.notify()},remove:function(e,t){delete e.map[t]},change:function(e,t){var a=t.path,n=void 0===a?[]:a,r=t.key,i=t.value,o=e.map;n.forEach((function(e){o=o[e]})),o[r]=i},setCurrentGeometry:function(e,t){e.currentGeometry=e.map[t]}},actions:{}}},"84da":function(e,t,a){"use strict";a("e371")},"89d3":function(e,t,a){var n={"./index.js":"4360","./modules/geometry.js":"80fa","./modules/material.js":"a991","./modules/model.js":"98ba","./modules/texture.js":"0e68"};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="89d3"},"8bde":function(e,t,a){"use strict";a("0af4")},"8da5":function(e,t,a){"use strict";a("77bf")},"94cc":function(e,t,a){},"94cd":function(e,t,a){"use strict";a("6ffb")},"98ba":function(e,t,a){"use strict";a.r(t),a.d(t,"modelDataSupport",(function(){return i})),a.d(t,"module",(function(){return e}));a("d81d"),a("d3b7"),a("159b");var n=a("a026"),r=a("fe9e"),i=new r["j"](n["default"].observable({}));e={namespaced:!0,state:{map:i.getData(),module:r["g"].MODEL,currentModel:""},getters:{get:function(e){return e.map},currentModel:function(e){return e.currentModel}},mutations:{add:function(e,t){var a=n["default"].observable(t);e.map[a.vid]=a,e.map.__ob__.dep.notify()},remove:function(e,t){delete e.map[t]},change:function(e,t){var a=t.path,n=void 0===a?[]:a,r=t.key,i=t.value,o=e.map;n.forEach((function(e){o=o[e]})),o[r]=i},setMaterial:function(e,t){var a=t.vid,n=t.value;if(!e.map[a])return console.warn("can not found vid in model: ".concat(a)),!1;e.map[a].material=n},setCurrentModel:function(e,t){e.currentModel=e.map[t],e.currentModel&&this.commit("geometry/setCurrentGeometry",e.currentModel.geometry)}},actions:{}}},"995d":function(e,t,a){"use strict";a("c5c3")},a6b6:function(e,t,a){},a991:function(e,t,a){"use strict";a.r(t),a.d(t,"materialDataSupport",(function(){return i})),a.d(t,"module",(function(){return e}));a("d81d"),a("d3b7"),a("159b");var n=a("a026"),r=a("fe9e"),i=new r["h"](n["default"].observable({}));e={namespaced:!0,state:{map:i.getData(),module:r["g"].MATERIAL,draggedMaterial:"",dragging:!1,currentMaterial:""},getters:{get:function(e){return e.map},currentMaterial:function(e){return e.currentMaterial},dragging:function(e){return e.dragging},draggedMaterial:function(e){return e.draggedMaterial}},mutations:{dragging:function(e,t){e.dragging=t},setDraggedMaterial:function(e,t){e.draggedMaterial=t},setCurrentMaterial:function(e,t){e.currentMaterial=e.map[t]},add:function(e,t){var a=n["default"].observable(t);e.map[a.vid]=a,e.map.__ob__.dep.notify(),this.commit("material/setCurrentMaterial",t.vid)},remove:function(e,t){delete e.map[t]},change:function(e,t){var a=t.path,n=void 0===a?[]:a,r=t.key,i=t.value,o=e.map;n.forEach((function(e){o=o[e]})),o[r]=i}},actions:{}}},b036:function(e,t,a){},b7d5:function(e,t,a){"use strict";a("a6b6")},c5c3:function(e,t,a){},e2b9:function(e,t,a){"use strict";a("94cc")},e371:function(e,t,a){},ed7d:function(e,t,a){},f0f9:function(e,t,a){"use strict";a("3c0e")},f458:function(e,t,a){},fe9e:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return zt})),a.d(t,"c",(function(){return Wt})),a.d(t,"d",(function(){return Ut})),a.d(t,"e",(function(){return Ht})),a.d(t,"f",(function(){return Qe})),a.d(t,"g",(function(){return ue})),a.d(t,"h",(function(){return Pt})),a.d(t,"i",(function(){return na})),a.d(t,"j",(function(){return tt})),a.d(t,"k",(function(){return qt})),a.d(t,"l",(function(){return Vt})),a.d(t,"m",(function(){return ie})),a.d(t,"n",(function(){return _t})),a.d(t,"o",(function(){return Qt})),a.d(t,"p",(function(){return Dt})),a.d(t,"q",(function(){return ia})),a.d(t,"r",(function(){return Z}));var n,r,i=a("b85c"),o=a("2909"),s=a("45eb"),c=a("7e84"),u=a("257e"),l=a("262e"),p=a("2caf"),d=a("ade3"),h=a("d4ec"),f=a("bee2"),m=a("53ca"),v=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("6062"),a("159b"),a("99af"),a("b64b"),a("d81d"),a("a434"),a("b0c0"),a("10d1"),a("5d41"),a("f8c9"),a("7ed3"),a("ac16"),a("1fe2"),a("e9c4"),a("ac1f"),a("00b4"),a("5319"),a("1276"),a("eee7"),a("498a"),a("38cf"),a("a15b"),a("a9e3"),a("b680"),a("fb6a"),a("bf19"),a("caad"),a("2532"),a("5492")),g=a("77bc"),b=a("e61b"),y=a("1dab"),O=a("63b7"),M=a("10d4"),j=Object.defineProperty,w=function(e,t,a){return t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a},E=function(e,t,a){return w(e,"symbol"!==Object(m["a"])(t)?t+"":t,a),a},S=function(){function e(){Object(h["a"])(this,e),E(this,"listeners",new Map)}return Object(f["a"])(e,[{key:"addEventListener",value:function(e,t){var a=this.listeners;a.has(e)||a.set(e,new Set),a.get(e).add(t)}},{key:"hasEventListener",value:function(e,t){var a=this.listeners;return!!a.has(e)&&a.get(e).has(t)}},{key:"removeEventListener",value:function(e,t){var a=this.listeners;a.has(e)&&a.get(e).has(t)&&a.get(e).delete(t)}},{key:"dispatchEvent",value:function(e){var t,a=this,n=e.type,r=this.listeners;if(r.has(n))try{null==(t=r.get(n))||t.forEach((function(t){t.call(a,e)}))}catch(i){console.error(i)}}}]),e}(),C=function(){return{vid:"",type:"Object3D",castShadow:!0,receiveShadow:!0,lookAt:"",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},x=function(){return Object.assign(C(),{type:"Light",color:"rgb(255, 255, 255)",intensity:1})},k=function(){return Object.assign(C(),{type:"AmbientLight",color:"rgb(255, 255, 255)",intensity:1})},L=function(){return Object.assign(x(),{type:"PointLight",distance:30,decay:.01})},R=function(){return Object.assign(x(),{type:"SpotLight",distance:30,angle:Math.PI/180*45,penumbra:.01,decay:.01})},T=function(){return{vid:"",type:"Geometry",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},D=function(){return Object.assign(T(),{type:"BoxGeometry",width:5,height:5,depth:5,widthSegments:1,heightSegments:1,depthSegments:1})},A=function(){return Object.assign(T(),{type:"SphereGeometry",radius:3,widthSegments:32,heightSegments:32,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI})},P=function(){return Object.assign(T(),{type:"LoadGeometry",url:""})},N=function(){return Object.assign(C(),{type:"Model",display:"Mesh",geometry:"",material:""})},H=function(){return{vid:"",type:"Texture",name:"",mapping:v["wb"],wrapS:v["h"],wrapT:v["h"],magFilter:v["F"],minFilter:v["G"],anisotropy:1,format:v["fb"],offset:{x:0,y:0},repeat:{x:1,y:1},rotation:0,center:{x:0,y:0},matrixAutoUpdate:!0,encoding:v["E"],needsUpdate:!1}},G=function(){return Object.assign(H(),{type:"ImageTexture",url:""})},z=function(){return Object.assign(H(),{type:"CubeTexture",cube:{nx:"",ny:"",nz:"",px:"",py:"",pz:""}})},I=function(){return{vid:"",type:"Material",alphaTest:0,colorWrite:!0,depthTest:!0,depthWrite:!0,format:v["fb"],fog:!0,name:"",needsUpdate:!1,opacity:1,dithering:!1,shadowSide:null,side:v["w"],toneMapped:!0,transparent:!1,visible:!0}},V=function(){return Object.assign(I(),{type:"MeshStandardMaterial",aoMapIntensity:1,bumpScale:1,color:"rgb(255, 255, 255)",displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1,envMapIntensity:1,flatShading:!1,lightMapIntensity:1,metalness:0,normalMapType:v["sb"],refractionRatio:.98,roughness:1,wireframe:!1,wireframeLinecap:"round",wireframeLinejoin:"round",roughnessMap:"",normalMap:"",metalnessMap:"",map:"",lightMap:"",envMap:"",emissiveMap:"",displacementMap:"",bumpMap:"",alphaMap:"",aoMap:""})},B=function(){return Object.assign(I(),{type:"MeshPhongMateria",aoMapIntensity:1,bumpScale:1,color:"rgb(255, 255, 255)",displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1,envMapIntensity:1,flatShading:!1,lightMapIntensity:1,normalMapType:v["sb"],refractionRatio:.98,wireframe:!1,wireframeLinecap:"round",wireframeLinejoin:"round",specular:"rgb(17, 17, 17)",shininess:30,combine:v["R"],normalMap:"",map:"",lightMap:"",envMap:"",emissiveMap:"",displacementMap:"",bumpMap:"",alphaMap:"",aoMap:"",specularMap:""})},_=function(){return Object.assign(C(),{type:"PerspectiveCamera",adaptiveWindow:!1,fov:45,aspect:1920/1080,near:5,far:50})},F=function(){return Object.assign(C(),{type:"OrthographicCamera",adaptiveWindow:!1,left:120,right:120,top:67.5,bottom:67.5,near:5,far:50})};(function(e){e["BOXGEOMETRY"]="BoxGeometry",e["SPHEREGEOMETRY"]="SphereGeometry",e["LOADGEOMETRY"]="LoadGeometry",e["MODEL"]="Model",e["MESH"]="Mesh",e["LINE"]="Line",e["POINTS"]="Points",e["IMAGETEXTURE"]="ImageTexture",e["CUBETEXTURE"]="CubeTexture",e["MESHSTANDARDMATERIAL"]="MeshStandardMaterial",e["MESHPHONGMATERIAL"]="MeshPhongMaterial",e["AMBIENTLIGHT"]="AmbientLight",e["SPOTLIGHT"]="SpotLight",e["POINTLIGHT"]="PointLight",e["PERSPECTIVECAMERA"]="PerspectiveCamera",e["ORTHOGRAPHICCAMERA"]="OrthographicCamera",e["WEBGLRENDERER"]="WebGLRenderer",e["SCENE"]="Scene",e["TRNASFORMCONTROLS"]="TransformControls",e["ORBITCONTROLS"]="OrbitControls"})(r||(r={}));var W,U=function(){return{vid:"WebGLRenderer",type:"WebGLRenderer",clearColor:"rgba(0, 0, 0, 0)",outputEncoding:v["E"],physicallyCorrectLights:!1,shadowMap:{enabled:!1,autoUpdate:!0,type:v["X"]},toneMapping:v["S"],toneMappingExposure:1,pixelRatio:window.devicePixelRatio,adaptiveCamera:!1,viewport:null,scissor:null,size:null}},Y=function(){return{vid:"Scene",type:"Scene",background:"",environment:"",fog:null}},$=function(){return{vid:"TransformControls",type:"TransformControls",axis:"XYZ",enabled:!0,mode:"translate",snapAllow:!1,rotationSnap:Math.PI/180*10,translationSnap:5,scaleSnap:.1,showX:!0,showY:!0,showZ:!0,size:1,space:"world"}},X=function(){return{vid:"OrbitControls",type:"OrbitControls",autoRotate:!1,autoRotateSpeed:2,enableDamping:!1,dampingFactor:.05}},J=(n={},Object(d["a"])(n,r.IMAGETEXTURE,G),Object(d["a"])(n,r.CUBETEXTURE,z),Object(d["a"])(n,r.MESHSTANDARDMATERIAL,V),Object(d["a"])(n,r.MESHPHONGMATERIAL,B),Object(d["a"])(n,r.AMBIENTLIGHT,k),Object(d["a"])(n,r.SPOTLIGHT,R),Object(d["a"])(n,r.POINTLIGHT,L),Object(d["a"])(n,r.BOXGEOMETRY,D),Object(d["a"])(n,r.SPHEREGEOMETRY,A),Object(d["a"])(n,r.LOADGEOMETRY,P),Object(d["a"])(n,r.MODEL,N),Object(d["a"])(n,r.PERSPECTIVECAMERA,_),Object(d["a"])(n,r.ORTHOGRAPHICCAMERA,F),Object(d["a"])(n,r.WEBGLRENDERER,U),Object(d["a"])(n,r.SCENE,Y),Object(d["a"])(n,r.TRNASFORMCONTROLS,$),Object(d["a"])(n,r.ORBITCONTROLS,X),n),Z=function(e,t,a){if(J[e]){var n=function t(n,r){for(var i in r)void 0!==n[i]?"object"===Object(m["a"])(r[i])&&null!==r[i]?t(n[i],r[i]):n[i]=r[i]:a&&console.warn("'".concat(e,"' config can not set key: ").concat(i))},r=J[e]();return t&&n(r,t),r}return console.error("type: ".concat(e," can not be found in configList.")),null},q="rgb(230, 20, 240)",K="rgb(255, 158, 240)",Q="rgb(255, 255, 255)",ee=function(){return new v["C"]({color:Q})},te=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"sphere"),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"shape"),E(Object(u["a"])(n),"type","VisPointLightHelper"),E(Object(u["a"])(n),"cachaColor"),E(Object(u["a"])(n),"cachaDistance"),E(Object(u["a"])(n),"cachaVector3"),n.geometry=new v["e"];var r=[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,0,0,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,-.707,0,-.707,.707,0,.707,.707,0,-.707,-.707,0,.707];n.geometry.setAttribute("position",new v["t"](r,3)),n.material=ee(),n.geometry.boundingSphere;var i=(new v["j"]).copy(e.color).multiplyScalar(e.intensity),o=new v["M"](new v["U"](e.distance,0),new v["N"]({color:i,wireframe:!0}));return o.raycast=function(){},n.shape=o,n.target=e,n.sphere=new v["kb"](new v["zb"](0,0,0),1),n.cachaColor=e.color.getHex(),n.cachaDistance=e.distance,n.cachaVector3=new v["zb"],n.add(n.shape),n.matrixAutoUpdate=!1,n.matrix=e.matrix,n.onBeforeRender=function(){var e=n.target,t=n.shape,a=Object(u["a"])(n);e.distance!==n.cachaDistance&&(t.geometry.dispose(),t.geometry=new v["U"](e.distance,0),n.cachaDistance=e.distance),e.color.getHex()!==n.cachaColor&&(t.material.color.copy(e.color).multiplyScalar(e.intensity),a.material.color.copy(e.color).multiplyScalar(e.intensity),n.cachaColor=e.color.getHex())},n}return Object(f["a"])(a,[{key:"raycast",value:function(e,t){var a=this.target,n=a.matrixWorld,r=this.sphere;r.set(this.cachaVector3.set(0,0,0),1),r.applyMatrix4(n),e.ray.intersectsSphere(r)&&t.push({distance:e.ray.origin.distanceTo(a.position),object:a,point:a.position})}}]),a}(v["D"]),ae=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"shape"),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"type","CameraHelper"),E(Object(u["a"])(n),"cachaData");var r=new v["e"],i=[0,0,0,-1,1,-1,0,0,0,-1,1,1,0,0,0,-1,-1,-1,0,0,0,-1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,-1,1,0,0,0,0,1,1,0,0,0,0,1,-1,0,0,0,0,-1,-1,0,0,0,0,-1,1,0,1,1,0,1,-1,0,1,-1,0,-1,-1,0,-1,-1,0,-1,1,0,-1,1,0,1,1,0,-1,1,2,-1,1,0,1,-1,2,1,-1,0,-1,-1,2,-1,-1,0,1,1,2,1,1,2,1,1,2,-1,1,2,-1,1,2,-1,-1,2,-1,-1,2,1,-1,2,1,-1,2,1,1];r.setAttribute("position",new v["t"](i,3)),r.rotateY(-90*Math.PI/180),r.computeBoundingBox();var o=new v["g"](e);return o.matrix=new v["L"],o.matrixAutoUpdate=!0,o.raycast=function(){},n.add(o),n.shape=o,n.geometry=r,n.material=ee(),n.target=e,n.matrixAutoUpdate=!1,n.matrix=e.matrix,e instanceof v["Z"]?n.cachaData={fov:e.fov,aspect:e.aspect,near:e.near,far:e.far}:e instanceof v["W"]?n.cachaData={left:e.left,right:e.right,top:e.top,bottom:e.bottom,near:e.near,far:e.far}:n.cachaData={},n.onBeforeRender=function(){var t=!1,a=n.cachaData;Object.keys(a).forEach((function(n){a[n]!==e[n]&&(a[n]=e[n],t=!0)})),t&&n.shape.update()},n}return Object(f["a"])(a,[{key:"raycast",value:function(e,t){var a=this.matrixWorld,n=this.geometry.boundingBox.clone();if(n.applyMatrix4(a),e.ray.intersectsBox(n)){var r=this.target;t.push({distance:e.ray.origin.distanceTo(r.position),object:r,point:r.position})}}}]),a}(v["D"]),ne=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"type","VisMeshHelper"),E(Object(u["a"])(n),"cachaGeometryUUid");var r=1;return n.target=e,n.geometry=new v["p"](e.geometry,r),n.cachaGeometryUUid=e.geometry.uuid,n.material=ee(),n.raycast=function(){},n.matrixAutoUpdate=!1,n.matrix=e.matrix,n.onBeforeRender=function(){var e=n.target;e.geometry.uuid!==n.cachaGeometryUUid&&(n.geometry.dispose(),n.geometry=new v["p"](e.geometry,r),n.cachaGeometryUUid=e.geometry.uuid)},n}return Object(f["a"])(a)}(v["D"]);(function(e){e["ADD"]="add",e["REMOVE"]="remove"})(W||(W={}));var re,ie,oe,se=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"scene"),n.map=new Map,n.scene=e,n}return Object(f["a"])(a,[{key:"getMap",value:function(){return this.map}},{key:"add",value:function(e){if(!a.filterHelperMap[e.type])if(a.typeHelperMap[e.type]){var t=new a.typeHelperMap[e.type](e);this.map.set(e,t),this.scene._add(t),this.dispatchEvent({type:W.ADD,helper:t,object:e})}else console.warn("Scene helper compiler can not support this type object: '".concat(e.type,"'"))}},{key:"remove",value:function(e){if(!a.filterHelperMap[e.type])if(this.map.has(e)){var t=this.map.get(e);this.scene._remove(t),t.geometry.dispose(),t.material&&(t.material instanceof v["K"]?t.material.dispose():t.material.forEach((function(e){e.dispose()}))),this.map.delete(e),this.dispatchEvent({type:W.REMOVE,helper:t,object:e})}else console.warn("Scene helper compiler can not found this object`s helper: ".concat(e))}},{key:"setVisiable",value:function(e){var t=this.scene;e?this.map.forEach((function(e,a){t._add(e)})):this.map.forEach((function(e,a){t._remove(e)}))}},{key:"resetHelperColor",value:function(){for(var e=this.map,t=a.helperColorHex,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(a){if(e.has(a)){var n=e.get(a);n.material.color.setHex(t)}}))}},{key:"setHelperHoverColor",value:function(){for(var e=this.map,t=a.hoverColorHex,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(a){if(e.has(a)){var n=e.get(a);n.material.color.setHex(t)}}))}},{key:"setHelperActiveColor",value:function(){for(var e=this.map,t=a.activeColorHex,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(a){if(e.has(a)){var n=e.get(a);n.material.color.setHex(t)}}))}}]),a}(v["r"]),ce=se;E(ce,"helperColorHex",new v["j"](Q).getHex()),E(ce,"activeColorHex",new v["j"](q).getHex()),E(ce,"hoverColorHex",new v["j"](K).getHex()),E(ce,"typeHelperMap",{PointLight:te,PerspectiveCamera:ae,OrthographicCamera:ae,Mesh:ne}),E(ce,"filterHelperMap",{AmbientLight:!0,Object3D:!0}),function(e){e["DefaultPerspectiveCamera"]="DefaultPerspectiveCamera",e["DefaultOrthograpbicCamera"]="DefaultOrthograpbicCamera"}(re||(re={})),function(e){e["DEFAULT"]="default",e["TOP"]="top",e["BOTTOM"]="bottom",e["LEFT"]="left",e["RIGHT"]="right",e["FRONT"]="front",e["BACK"]="back"}(ie||(ie={})),function(e){e["GEOMETRY"]="geometry",e["MATERIAL"]="material",e["LIGHT"]="light",e["ENV"]="env"}(oe||(oe={})),v["ib"].prototype.add=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!arguments.length)return this;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var r=t[0];if(r===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this;if(r&&r.isObject3D){if(null!==r.parent){var i=this.children.indexOf(r);-1!==i&&(r.parent=null,this.children.splice(i,1),r.dispatchEvent({type:"removed"}))}r.parent=this,this.children.push(r),r.dispatchEvent({type:"added"})}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t);return this};var ue,le=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n,r,i,o,l,p,d,f,g,b,y,O,M;if(Object(h["a"])(this,a),M=t.call(this),E(Object(u["a"])(M),"cameraSet"),E(Object(u["a"])(M),"lightSet"),E(Object(u["a"])(M),"meshSet"),E(Object(u["a"])(M),"lineSet"),E(Object(u["a"])(M),"pointsSet"),E(Object(u["a"])(M),"spriteSet"),E(Object(u["a"])(M),"helperCompiler"),E(Object(u["a"])(M),"resetHoverObjectSet"),E(Object(u["a"])(M),"resetActiveObjectSet"),E(Object(u["a"])(M),"displayMode"),E(Object(u["a"])(M),"meshOverrideMaterial"),E(Object(u["a"])(M),"lineOverrideMaterial"),E(Object(u["a"])(M),"pointsOverrideMaterial"),E(Object(u["a"])(M),"spriteOverrideMaterial"),E(Object(u["a"])(M),"materialCacheMap"),E(Object(u["a"])(M),"defaultAmbientLight"),E(Object(u["a"])(M),"defaultDirectionalLight"),E(Object(u["a"])(M),"backgroundCache"),E(Object(u["a"])(M),"environmentCache"),E(Object(u["a"])(M),"defaultPerspectiveCamera"),E(Object(u["a"])(M),"defaultOrthograpbicCamera"),E(Object(u["a"])(M),"axesHelper"),E(Object(u["a"])(M),"gridHelper"),E(Object(u["a"])(M),"showAxesHelper"),E(Object(u["a"])(M),"showGridHelper"),E(Object(u["a"])(M),"getDefaultPerspectiveCamera"),E(Object(u["a"])(M),"getDefaultOrthographicCamera"),E(Object(u["a"])(M),"setAxesHelper"),E(Object(u["a"])(M),"setGridHelper"),E(Object(u["a"])(M),"switchDisplayMode"),E(Object(u["a"])(M),"setDisplayMode"),M.cameraSet=new Set,M.lightSet=new Set,M.meshSet=new Set,M.lineSet=new Set,M.pointsSet=new Set,M.spriteSet=new Set,M.helperCompiler=new ce(Object(u["a"])(M)),M.resetHoverObjectSet=new Set,M.resetActiveObjectSet=new Set,e.hasDefaultPerspectiveCamera&&(e.defaultPerspectiveCameraSetting?M.defaultPerspectiveCamera=new v["Z"](e.defaultPerspectiveCameraSetting.fov,e.defaultPerspectiveCameraSetting.aspect,e.defaultPerspectiveCameraSetting.near,e.defaultPerspectiveCameraSetting.far):M.defaultPerspectiveCamera=new v["Z"](45,window.innerWidth/window.innerHeight,1,1e3),M.defaultPerspectiveCamera.position.set(50,50,50),M.defaultPerspectiveCamera.lookAt(0,0,0),M.defaultPerspectiveCamera.name="默认透视相机",M.cameraSet.add(M.defaultPerspectiveCamera),M.getDefaultPerspectiveCamera=function(){return this.defaultPerspectiveCamera}),e.hasDefaultOrthographicCamera){if(e.defaultOrthographicCameraSetting){var j=e.defaultOrthographicCameraSetting;M.defaultOrthograpbicCamera=new v["W"](j.left,j.right,j.top,j.bottom,j.near,j.far)}else{var w=window.innerWidth/2,S=window.innerHeight/2;M.defaultOrthograpbicCamera=new v["W"](-w/8,w/8,S/8,-S/8,1,1e3)}M.defaultOrthograpbicCamera.name="默认正交相机",M.cameraSet.add(M.defaultOrthograpbicCamera),M.getDefaultOrthographicCamera=function(){return this.defaultOrthograpbicCamera},M.addEventListener("".concat(ie.TOP,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(0,60,0)})),M.addEventListener("".concat(ie.BOTTOM,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(0,-60,0)})),M.addEventListener("".concat(ie.RIGHT,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(60,0,0)})),M.addEventListener("".concat(ie.LEFT,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(-60,0,0)})),M.addEventListener("".concat(ie.FRONT,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(0,0,60)})),M.addEventListener("".concat(ie.BACK,"ViewPoint"),(function(e){M.defaultOrthograpbicCamera.position.set(0,0,-60)}))}if(e.hasAxesHelper&&(M.axesHelper=new v["b"](500),M.axesHelper.matrixAutoUpdate=!1,M.axesHelper.raycast=function(){},Object(s["a"])((n=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",n).call(n,M.axesHelper),M.setAxesHelper=function(e){var t=this.axesHelper;if(e.size){var a=t.geometry.getAttribute("position");a.setX(e.size,1),a.setY(e.size,3),a.setZ(e.size,5),a.needsUpdate=!0}void 0!==Object(m["a"])(e.visiable)&&(t.visible=e.visiable)},M.showAxesHelper=function(e){e?Object(s["a"])((r=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",r).call(r,M.axesHelper):Object(s["a"])((i=Object(u["a"])(M),Object(c["a"])(a.prototype)),"remove",i).call(i,M.axesHelper)}),e.hasGridHelper){var C=new v["x"](500,50,"rgb(130, 130, 130)","rgb(70, 70, 70)");if(C.raycast=function(){},C.material instanceof v["K"]){var x=C.material;x.transparent=!0,x.opacity=.5,x.needsUpdate=!0}C.matrixAutoUpdate=!1,C.raycast=function(){},M.gridHelper=C,Object(s["a"])((o=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",o).call(o,C),M.addEventListener("".concat(ie.DEFAULT,"ViewPoint"),(function(e){C.rotation.set(0,0,0),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.TOP,"ViewPoint"),(function(e){C.rotation.set(0,0,0),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.BOTTOM,"ViewPoint"),(function(e){C.rotation.set(0,0,0),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.RIGHT,"ViewPoint"),(function(e){C.rotation.set(0,0,Math.PI/2),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.LEFT,"ViewPoint"),(function(e){C.rotation.set(0,0,Math.PI/2),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.FRONT,"ViewPoint"),(function(e){C.rotation.set(Math.PI/2,0,0),C.updateMatrix(),C.updateMatrixWorld()})),M.addEventListener("".concat(ie.BACK,"ViewPoint"),(function(e){C.rotation.set(Math.PI/2,0,0),C.updateMatrix(),C.updateMatrixWorld()})),M.showGridHelper=function(e){e?Object(s["a"])((l=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",l).call(l,M.gridHelper):Object(s["a"])((p=Object(u["a"])(M),Object(c["a"])(a.prototype)),"remove",p).call(p,M.gridHelper)}}if(e.hasDisplayMode){var k="rgb(250, 250, 250)";M.meshOverrideMaterial=new v["O"]({color:k}),M.lineOverrideMaterial=new v["C"]({color:k}),M.pointsOverrideMaterial=new v["db"]({color:k,size:5,sizeAttenuation:!1}),M.spriteOverrideMaterial=new v["qb"]({color:k}),M.materialCacheMap=new WeakMap,M.defaultAmbientLight=new v["a"]("rgb(255, 255, 255)",.5),M.defaultAmbientLight.matrixAutoUpdate=!1,M.defaultDirectionalLight=new v["n"]("rgb(255, 255, 255)",.3),M.defaultDirectionalLight.castShadow=!1,M.defaultDirectionalLight.position.set(-100,100,100),M.defaultDirectionalLight.updateMatrix(),M.defaultDirectionalLight.updateMatrixWorld(),M.defaultDirectionalLight.matrixAutoUpdate=!1,M.switchDisplayMode=function(e){var t=function(){var e=M.materialCacheMap,t=M.meshOverrideMaterial;M.meshSet.forEach((function(a){e.set(a,a.material),a.material=t}));var a=M.lineOverrideMaterial;M.lineSet.forEach((function(t){e.set(t,t.material),t.material=a}));var n=M.pointsOverrideMaterial;M.pointsSet.forEach((function(t){e.set(t,t.material),t.material=n}));var r=M.spriteOverrideMaterial;M.spriteSet.forEach((function(t){e.set(t,t.material),t.material=r}))},n=function(){var e=M.materialCacheMap;M.meshSet.forEach((function(t){e.get(t)&&(t.material=e.get(t),e.delete(t))})),M.lineSet.forEach((function(t){e.get(t)&&(t.material=e.get(t),e.delete(t))})),M.pointsSet.forEach((function(t){e.get(t)&&(t.material=e.get(t),e.delete(t))})),M.spriteSet.forEach((function(t){e.get(t)&&(t.material=e.get(t),e.delete(t))}))},r=function(){M.lightSet.forEach((function(e){Object(s["a"])((d=Object(u["a"])(M),Object(c["a"])(a.prototype)),"remove",d).call(d,e)})),Object(s["a"])((f=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",f).call(f,M.defaultAmbientLight),Object(s["a"])((g=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",g).call(g,M.defaultDirectionalLight)},i=function(){M.lightSet.forEach((function(e){Object(s["a"])((b=Object(u["a"])(M),Object(c["a"])(a.prototype)),"add",b).call(b,e)})),Object(s["a"])((y=Object(u["a"])(M),Object(c["a"])(a.prototype)),"remove",y).call(y,M.defaultAmbientLight),Object(s["a"])((O=Object(u["a"])(M),Object(c["a"])(a.prototype)),"remove",O).call(O,M.defaultDirectionalLight)},o=function(){M.background instanceof v["tb"]&&(M.backgroundCache=M.background,M.background=null),M.environment instanceof v["tb"]&&(M.environmentCache=M.environment,M.environment=null)},l=function(){M.backgroundCache&&(M.background=M.backgroundCache,M.backgroundCache=void 0),M.environmentCache&&(M.environment=M.environmentCache,M.environmentCache=void 0)};e===oe.GEOMETRY?(t(),o(),r()):e===oe.MATERIAL?(n(),o(),r()):e===oe.LIGHT?(n(),o(),i()):e===oe.ENV?(n(),l(),i()):console.warn("VisScene can not set this mode: ".concat(e))},M.setDisplayMode=function(e){M.displayMode=e,M.switchDisplayMode(e)},void 0!==e.displayMode?(M.setDisplayMode(e.displayMode),M.switchDisplayMode(M.displayMode)):(M.setDisplayMode(oe.ENV),M.switchDisplayMode(M.displayMode))}return M}return Object(f["a"])(a,[{key:"getHelperCompiler",value:function(){return this.helperCompiler}},{key:"setObjectHelperVisiable",value:function(e){this.helperCompiler.setVisiable(e)}},{key:"setObjectHelperHover",value:function(){for(var e,t,a=this.resetHoverObjectSet,n=this.resetActiveObjectSet,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.forEach((function(e,t,r){a.delete(e),n.has(e)&&r.splice(t,1)})),n.forEach((function(e){a.delete(e)})),(e=this.helperCompiler).resetHelperColor.apply(e,Object(o["a"])(a)),a.clear(),(t=this.helperCompiler).setHelperHoverColor.apply(t,i),i.forEach((function(e){a.add(e)})),this}},{key:"setObjectHelperActive",value:function(){for(var e,t,a=this.resetActiveObjectSet,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.forEach((function(e){a.delete(e)})),(e=this.helperCompiler).resetHelperColor.apply(e,Object(o["a"])(a)),a.clear(),(t=this.helperCompiler).setHelperActiveColor.apply(t,r),r.forEach((function(e){a.add(e)})),this}},{key:"showObjectHelper",value:function(e){return this.helperCompiler.setVisiable(e),this}},{key:"setViewPoint",value:function(e){this.dispatchEvent({type:"".concat(e,"ViewPoint")})}},{key:"add",value:function(){for(var e,t=this,n=0,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.forEach((function(e){e instanceof v["M"]?(t.meshSet.add(e),n+=1):e instanceof v["B"]?(t.lineSet.add(e),n+=1):e instanceof v["A"]?(t.lightSet.add(e),n+=1):e instanceof v["cb"]?(t.pointsSet.add(e),n+=1):e instanceof v["pb"]?(t.spriteSet.add(e),n+=1):e instanceof v["f"]&&(t.cameraSet.add(e),n+=1),t.helperCompiler.add(e)})),void 0!==this.displayMode&&n>0&&this.switchDisplayMode(this.displayMode),(e=Object(s["a"])(Object(c["a"])(a.prototype),"add",this)).call.apply(e,[this].concat(i))}},{key:"remove",value:function(){for(var e,t=this,n=this.materialCacheMap,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.forEach((function(e){n&&n.has(e)&&n.delete(e),e instanceof v["M"]?t.meshSet.delete(e):e instanceof v["B"]?t.lineSet.delete(e):e instanceof v["A"]?t.lightSet.delete(e):e instanceof v["cb"]?t.pointsSet.delete(e):e instanceof v["pb"]?t.spriteSet.delete(e):e instanceof v["f"]&&t.cameraSet.delete(e),t.helperCompiler.remove(e)})),(e=Object(s["a"])(Object(c["a"])(a.prototype),"remove",this)).call.apply(e,[this].concat(i))}},{key:"_add",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=Object(s["a"])(Object(c["a"])(a.prototype),"add",this)).call.apply(e,[this].concat(n))}},{key:"_remove",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=Object(s["a"])(Object(c["a"])(a.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"updateMaterial",value:function(e){var t;return void 0!==this.displayMode&&"geometry"===this.displayMode&&(null==(t=this.materialCacheMap)||t.set(e,e.material),this.switchDisplayMode&&this.switchDisplayMode(this.displayMode)),this}}]),a}(v["ib"]);(function(e){e["CAMERA"]="camera",e["LIGHT"]="light",e["GEOMETRY"]="geometry",e["MODEL"]="model",e["TEXTURE"]="texture",e["MATERIAL"]="material",e["RENDERER"]="renderer",e["SCENE"]="scene",e["SPRITE"]="sprite",e["STRUCTURE"]="structure",e["CONTROLS"]="controls"})(ue||(ue={}));var pe,de=function(e){var t=this;if(this.scene instanceof le)return console.warn("this has installed modeling scene plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;var a=new le(e);if(this.scene=a,this.render=function(){return t.webGLRenderer.render(a,t.currentCamera),t},e.hasDefaultPerspectiveCamera){var n=a.getDefaultPerspectiveCamera();this.currentCamera=n,a.addEventListener("".concat(ie.DEFAULT,"ViewPoint"),(function(e){t.setCamera(n)}))}if(e.hasDefaultOrthographicCamera){var r=a.getDefaultOrthographicCamera();a.addEventListener("".concat(ie.TOP,"ViewPoint"),(function(e){t.setCamera(r)})),a.addEventListener("".concat(ie.BOTTOM,"ViewPoint"),(function(e){t.setCamera(r)})),a.addEventListener("".concat(ie.RIGHT,"ViewPoint"),(function(e){t.setCamera(r)})),a.addEventListener("".concat(ie.LEFT,"ViewPoint"),(function(e){t.setCamera(r)})),a.addEventListener("".concat(ie.FRONT,"ViewPoint"),(function(e){t.setCamera(r)})),a.addEventListener("".concat(ie.BACK,"ViewPoint"),(function(e){t.setCamera(r)}))}return!0},he=function(e){if(de.call(this,e)){var t=this.dataSupportManager.getDataSupport(ue.SCENE).getData();return t.scene=Z(r.SCENE),!0}return!1};(function(e){e["BOXGEOMETRY"]="BoxGeometry",e["SPHEREGEOMETRY"]="SphereGeometry",e["LOADGEOMETRY"]="LoadGeometry",e["MODEL"]="Model",e["MESH"]="Mesh",e["LINE"]="Line",e["POINTS"]="Points",e["IMAGETEXTURE"]="ImageTexture",e["CUBETEXTURE"]="CubeTexture",e["MESHSTANDARDMATERIAL"]="MeshStandardMaterial",e["MESHPHONGMATERIAL"]="MeshPhongMaterial",e["AMBIENTLIGHT"]="AmbientLight",e["SPOTLIGHT"]="SpotLight",e["POINTLIGHT"]="PointLight",e["PERSPECTIVECAMERA"]="PerspectiveCamera",e["ORTHOGRAPHICCAMERA"]="OrthographicCamera",e["WEBGLRENDERER"]="WebGLRenderer",e["SCENE"]="Scene",e["TRNASFORMCONTROLS"]="TransformControls",e["ORBITCONTROLS"]="OrbitControls"})(pe||(pe={}));var fe,me,ve,ge,be,ye=function(e){var t=this;if(this.scene)return console.warn("this has installed scene plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;this.scene=new v["ib"],this.render=function(){return t.webGLRenderer.render(t.scene,t.currentCamera),t};var a=new v["Z"];return a.position.set(50,50,50),a.lookAt(0,0,0),this.currentCamera=a,!0},Oe=function(e){if(ye.call(this,e)){var t=this.dataSupportManager.getDataSupport(ue.SCENE).getData();return t.scene=Z(pe.SCENE),!0}return!1};(function(e){e["RENDER"]="render",e["PLAY"]="play",e["STOP"]="stop"})(fe||(fe={})),function(e){e["HOVERCHANGE"]="hover-change",e["ACTIVECHANGE"]="active-change"}(me||(me={})),function(e){e["POINTERDOWN"]="pointerdown",e["POINTERMOVE"]="pointermove",e["POINTERUP"]="pointerup"}(ve||(ve={})),function(e){e["SETMATERIAL"]="setMaterial"}(ge||(ge={})),function(e){e["LOADING"]="loading",e["DETAILLOADING"]="detailLoading",e["DETAILLOADED"]="detailLoaded",e["LOADED"]="loaded"}(be||(be={}));var Me,je=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.apply(this,arguments),E(Object(u["a"])(e),"clock",new v["i"]),E(Object(u["a"])(e),"animationFrame",-1),E(Object(u["a"])(e),"render",(function(){var t=e.clock,a=t.getDelta(),n=t.getElapsedTime();e.dispatchEvent({type:fe.RENDER,delta:a,total:n})})),E(Object(u["a"])(e),"play",(function(){e.dispatchEvent({type:fe.PLAY});var t=function t(){e.render(),e.animationFrame=requestAnimationFrame(t)};t()})),E(Object(u["a"])(e),"stop",(function(){cancelAnimationFrame(e.animationFrame),e.animationFrame=-1,e.dispatchEvent({type:fe.STOP})})),E(Object(u["a"])(e),"checkHasRendering",(function(){return-1!==e.animationFrame})),E(Object(u["a"])(e),"hasVaildRender",(function(){if(!e._listeners)return!1;var t=e._listeners["render"];return t&&t.length})),e}return Object(f["a"])(a)}(v["r"]),we=function(){return this.renderManager?(console.warn("this has installed render manager plugin."),!1):(this.renderManager=new je,this.render&&this.renderManager.addEventListener("render",this.render),this.render=function(){return this.renderManager.render(),this},this.play=function(){return this.renderManager.play(),this},this.stop=function(){return this.renderManager.stop(),this},!0)},Ee=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e,n){var r;return Object(h["a"])(this,a),r=t.call(this,e,n),r.mouseButtons={LEFT:null,MIDDLE:v["J"].DOLLY,RIGHT:v["J"].ROTATE},r}return Object(f["a"])(a,[{key:"setCamera",value:function(e){return this.object=e,this.update(),this}}]),a}(g["a"]),Se=function(e){var t=this;if(this.orbitControls)return console.warn("this has installed orbitControls plugin."),!1;if(!this.webGLRenderer)return console.warn("this must install renderer before install orbitControls plugin."),!1;if(!this.renderManager)return console.warn("this must install renderManager before install orbitControls plugin."),!1;if(this.orbitControls=new Ee(this.currentCamera,this.dom),this.addEventListener("setCamera",(function(e){t.orbitControls.setCamera(e.camera)})),this.renderManager.addEventListener("render",(function(){t.orbitControls.update()})),this.scene instanceof le){var a=this.scene;a.addEventListener("".concat(ie.DEFAULT,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!0})),a.addEventListener("".concat(ie.TOP,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1})),a.addEventListener("".concat(ie.BOTTOM,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1})),a.addEventListener("".concat(ie.RIGHT,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1})),a.addEventListener("".concat(ie.LEFT,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1})),a.addEventListener("".concat(ie.FRONT,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1})),a.addEventListener("".concat(ie.BACK,"ViewPoint"),(function(e){t.orbitControls.enableRotate=!1}))}return!0},Ce=function(e){if(Se.call(this,e)){var t=this.dataSupportManager.getDataSupport(ue.CONTROLS).getData();return t[r.ORBITCONTROLS]=Z(r.ORBITCONTROLS),!0}return!1},xe=Object(f["a"])((function e(t){Object(h["a"])(this,e),E(this,"REVISION"),E(this,"dom"),E(this,"addPanel"),E(this,"showPanel"),E(this,"begin"),E(this,"end"),E(this,"update"),E(this,"domElement"),E(this,"setMode");var a=Object(b["a"])();this.REVISION=a.REVISION,this.dom=a.dom,this.domElement=a.domElement,this.begin=a.begin.bind(a),this.end=a.end.bind(a),this.update=a.update.bind(a),this.addPanel=a.addPanel.bind(a),this.showPanel=a.showPanel.bind(a),this.setMode=a.setMode.bind(a);var n=this.domElement;n.style.position="absolute",n.style.top="0",n.style.left="35px",t&&(n.style.top="".concat(t.top,"px"),n.style.left="".concat(t.left,"px"),n.style.right="".concat(t.right,"px"),n.style.bottom="".concat(t.bottom,"px"))})),ke=function(e){var t=this;if(this.stats)return console.warn("this has installed stats plugin."),!1;if(!this.renderManager)return console.warn("this must install renderManager before install orbitControls plugin."),!1;var a=new xe(e);return this.stats=a,this.setStats=function(e){if(e)this.dom.appendChild(this.stats.domElement);else try{this.dom.removeChild(this.stats.domElement)}catch(t){}return this},this.renderManager.addEventListener("render",(function(){t.stats.update()})),!0},Le=function(e){var t,a,n=this;if(this.effectComposer)return console.warn("this has installed effect composer plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;if(null==e?void 0:e.WebGLMultisampleRenderTarget){var r=this.webGLRenderer,i=r.getPixelRatio(),o=r.getDrawingBufferSize(new v["yb"]);t=new y["a"](r,new v["Ab"](o.width*i,o.height*i,{format:v["fb"]}))}else t=new y["a"](this.webGLRenderer);return this.effectComposer=t,this.scene?(a=new O["a"](this.scene,this.currentCamera),t.addPass(a),this.addEventListener("setCamera",(function(e){a.camera=e.camera})),this.addEventListener("setSize",(function(e){t.setSize(e.width,e.height)})),this.renderManager&&this.renderManager.removeEventListener("render",this.render),this.render=function(){return n.effectComposer.render(),n},this.renderManager&&this.renderManager.addEventListener("render",(function(e){n.effectComposer.render(e.delta)})),!0):(console.error("composer con not found support scene plugin."),!1)},Re=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"dom"),E(Object(u["a"])(n),"mouse"),E(Object(u["a"])(n),"canMouseMove"),E(Object(u["a"])(n),"mouseEventTimer"),E(Object(u["a"])(n),"throttleTime");var r=e.dom;return n.dom=r,n.mouse=new v["yb"],n.canMouseMove=!0,n.mouseEventTimer=null,n.throttleTime=e.throttleTime||1e3/60,r.addEventListener("pointerdown",(function(e){n.pointerDown(e)})),r.addEventListener("pointermove",(function(e){n.canMouseMove&&(n.canMouseMove=!1,n.mouseEventTimer=setTimeout((function(){var t=n.mouse,a=n.dom;t.x=e.offsetX/a.offsetWidth*2-1,t.y=-e.offsetY/a.offsetHeight*2+1,n.canMouseMove=!0,n.pointerMove(e)}),n.throttleTime))})),r.addEventListener("pointerup",(function(e){n.pointerUp(e)})),n}return Object(f["a"])(a,[{key:"getMousePoint",value:function(){return this.mouse}},{key:"pointerDown",value:function(e){var t={mouse:this.mouse};for(var a in e)t[a]=e[a];this.dispatchEvent(t)}},{key:"pointerMove",value:function(e){var t={mouse:this.mouse};for(var a in e)t[a]=e[a];this.dispatchEvent(t)}},{key:"pointerUp",value:function(e){var t={mouse:this.mouse};for(var a in e)t[a]=e[a];this.dispatchEvent(t)}}]),a}(S),Te=function(e){if(this.pointerManager)return console.warn("this has installed pointerManager plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;var t=new Re(Object.assign(e||{},{dom:this.dom}));return this.pointerManager=t,!0},De=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"raycaster"),E(Object(u["a"])(n),"scene"),E(Object(u["a"])(n),"camera"),E(Object(u["a"])(n),"recursive",!1),E(Object(u["a"])(n),"penetrate",!1),n.raycaster=new v["gb"],n.camera=e.camera,n.scene=e.scene,e.recursive&&(n.recursive=e.recursive),e.penetrate&&(n.penetrate=e.penetrate),n}return Object(f["a"])(a,[{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"intersectObject",value:function(e){return this.raycaster.setFromCamera(e,this.camera),this.raycaster.intersectObjects(this.scene.children,this.recursive)}},{key:"use",value:function(e){var t=this,a=function(e,t){return Object.assign({},e,t)};e.addEventListener("pointerdown",(function(e){var n=t.intersectObject(e.mouse);if(t.dispatchEvent(a(e,{type:"pointerdown",intersections:n})),t.dispatchEvent(a(e,{type:"mousedown",intersections:n})),n.length)if(t.penetrate){var r,o=Object(i["a"])(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.object.dispatchEvent(a(e,{type:"pointerdown",intersection:s})),s.object.dispatchEvent(a(e,{type:"mousedown",intersection:s}))}}catch(u){o.e(u)}finally{o.f()}}else{var c=n[0];c.object.dispatchEvent(a(e,{type:"pointerdown",intersection:c})),c.object.dispatchEvent(a(e,{type:"mousedown",intersection:c}))}}));var n=new Map;return e.addEventListener("pointermove",(function(e){var r=t.intersectObject(e.mouse);if(t.dispatchEvent(a(e,{type:"pointermove",intersections:r})),t.dispatchEvent(a(e,{type:"mousemove",intersections:r})),r.length){if(t.penetrate){var o,s=Object(i["a"])(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;n.has(c.object)?(c.object.dispatchEvent(a(e,{type:"pointermove",intersection:c})),c.object.dispatchEvent(a(e,{type:"mousemove",intersection:c}))):(c.object.dispatchEvent(a(e,{type:"pointerenter",intersection:c})),c.object.dispatchEvent(a(e,{type:"mouseenter",intersection:c})))}}catch(h){s.e(h)}finally{s.f()}}else{var u=r[0];n.has(u.object)?(u.object.dispatchEvent(a(e,{type:"pointermove",intersection:u})),u.object.dispatchEvent(a(e,{type:"mousemove",intersection:u}))):(u.object.dispatchEvent(a(e,{type:"pointerenter",intersection:u})),u.object.dispatchEvent(a(e,{type:"mouseenter",intersection:u})))}var l,p=Object(i["a"])(r);try{for(p.s();!(l=p.n()).done;){var d=l.value;n.set(d.object,d)}}catch(h){p.e(h)}finally{p.f()}}else n.forEach((function(t){t.object.dispatchEvent(a(e,{type:"pointerleave",intersection:t})),t.object.dispatchEvent(a(e,{type:"mouseleave",intersection:t}))})),n.clear()})),e.addEventListener("pointerup",(function(e){var n=t.intersectObject(e.mouse);if(t.dispatchEvent(a(e,{type:"pointerup",intersections:n})),t.dispatchEvent(a(e,{type:"mouseup",intersections:n})),t.dispatchEvent(a(e,{type:"click",intersections:n})),n.length)if(t.penetrate){var r,o=Object(i["a"])(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.object.dispatchEvent(a(e,{type:"pointerup",intersection:s})),s.object.dispatchEvent(a(e,{type:"mouseup",intersection:s})),s.object.dispatchEvent(a(e,{type:"click",intersection:s}))}}catch(u){o.e(u)}finally{o.f()}}else{var c=n[0];c.object.dispatchEvent(a(e,{type:"pointerup",intersection:c})),c.object.dispatchEvent(a(e,{type:"mouseup",intersection:c})),c.object.dispatchEvent(a(e,{type:"click",intersection:c}))}})),this}}]),a}(S),Ae=function(e){var t=this;if(this.eventManager)return console.warn("engine has installed eventManager plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;if(!this.pointerManager)return console.error("must install pointerManager before this plugin."),!1;var a=new De(Object.assign({scene:this.scene,camera:this.currentCamera},e));return a.use(this.pointerManager),this.eventManager=a,this.addEventListener("setCamera",(function(e){t.eventManager.setCamera(e.camera)})),this.scene instanceof le&&(this.eventManager.addEventListener("pointermove",(function(e){var a;(a=t.scene).setObjectHelperHover.apply(a,Object(o["a"])(e.intersections.map((function(e){return e.object}))))})),this.eventManager.addEventListener("click",(function(e){var a;t.transing?t.transing=!1:0===e.button&&(a=t.scene).setObjectHelperActive.apply(a,Object(o["a"])(e.intersections.map((function(e){return e.object}))))}))),!0},Pe=function(e){return!!Ae.call(this,e)};(function(e){e["OBJECTCHANGE"]="objectChange",e["OBJECTCHANGED"]="objectChanged"})(Me||(Me={}));var Ne,He=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e,n){var r;Object(h["a"])(this,a),r=t.call(this,e,n),E(Object(u["a"])(r),"target"),E(Object(u["a"])(r),"transObjectSet"),r.domElement.removeEventListener("pointerdown",r._onPointerDown),r._onPointerDown=function(e){var t;r.enabled&&(null==(t=r.object)?void 0:t.parent)&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",r._onPointerMove),r.pointerHover(r._getPointer(e)),r.pointerDown(r._getPointer(e)))},r.domElement.addEventListener("pointerdown",r._onPointerDown),r.target=new v["T"],r.transObjectSet=new Set;var i="",o=r.target,s=r.transObjectSet,c={x:0,y:0,z:0},l=new WeakMap;return r.addEventListener("mouseDown",(function(e){i=e.target.mode,"translate"===i&&(i="position"),"rotate"===i&&(i="rotation"),c.x=o[i].x,c.y=o[i].y,c.z=o[i].z,s.forEach((function(e){l.set(e,e.matrixAutoUpdate),e.matrixAutoUpdate=!1}))})),r.addEventListener("objectChange",(function(e){var t=o[i].x-c.x,a=o[i].y-c.y,n=o[i].z-c.z;c.x=o[i].x,c.y=o[i].y,c.z=o[i].z,s.forEach((function(e){e[i].x+=t,e[i].y+=a,e[i].z+=n,e.updateMatrix(),e.updateMatrixWorld()})),r.dispatchEvent({type:Me.OBJECTCHANGED,transObjectSet:s,mode:i,target:o})})),r.addEventListener("mouseUp",(function(e){s.forEach((function(e){e.matrixAutoUpdate=l.get(e),l.delete(e)}))})),r}return Object(f["a"])(a,[{key:"getTarget",value:function(){return this.target}},{key:"getTransObjectSet",value:function(){return this.transObjectSet}},{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"setAttach",value:function(){var e=this;this.transObjectSet.clear();for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];if(!a.length||!a[0])return this.detach(),this;this.attach(this.target);var r=this.target;if(1===a.length){var i=a[0];return r.scale.copy(i.scale),r.rotation.copy(i.rotation),r.position.copy(i.position),r.updateMatrix(),r.updateMatrixWorld(),this.transObjectSet.add(i),this}var o=[],s=[],c=[];return a.forEach((function(e){o.push(e.position.x),s.push(e.position.y),c.push(e.position.z)})),r.rotation.set(0,0,0),r.scale.set(0,0,0),r.position.x=(Math.max.apply(Math,o)-Math.min.apply(Math,o))/2+Math.min.apply(Math,o),r.position.y=(Math.max.apply(Math,s)-Math.min.apply(Math,s))/2+Math.min.apply(Math,s),r.position.z=(Math.max.apply(Math,c)-Math.min.apply(Math,c))/2+Math.min.apply(Math,c),r.updateMatrix(),r.updateMatrixWorld(),a.forEach((function(t){e.transObjectSet.add(t)})),this}}]),a}(M["a"]),Ge=function(e){var t=this;if(this.transformControls)return console.warn("this has installed transformControls plugin."),!1;if(!this.webGLRenderer)return console.warn("this must install renderer before install transformControls plugin."),!1;if(!this.pointerManager)return console.warn("this must install pointerManager before install transformControls plugin."),!1;if(!this.eventManager)return console.warn("this must install eventManager before install transformControls plugin."),!1;var a=new He(this.currentCamera,this.dom);return this.transformControls=a,this.transing=!1,a.addEventListener("mouseDown",(function(){t.transing=!0})),this.scene instanceof v["ib"]?(this.scene.add(this.transformControls),this.scene.add(this.transformControls.target)):this.scene instanceof le&&(this.scene._add(this.transformControls),this.scene._add(this.transformControls.target)),this.setTransformControls=function(e){return this.transformControls.visible=e,this},this.addEventListener("setCamera",(function(e){a.setCamera(e.camera)})),this.eventManager.addEventListener("pointerup",(function(e){if(!t.transing&&0===e.button){var n=e.intersections.map((function(e){return e.object}));a.setAttach(n[0])}})),!0},ze=function(e){if(Ge.call(this,e)){var t=this.dataSupportManager.getDataSupport(ue.CONTROLS).getData();return t[r.TRNASFORMCONTROLS]=Z(r.TRNASFORMCONTROLS),!0}return!1},Ie=function(e){var t=this;return this.webGLRenderer?(console.warn("this has installed webglRenderer plugin."),!1):(this.webGLRenderer=new v["Cb"](e),this.dom=this.webGLRenderer.domElement,this.setSize=function(e,t){var a,n;return e&&e<=0||t&&t<=0?(console.warn("you must be input width and height bigger then zero, width: ".concat(e,", height: ").concat(t)),this):(!e&&(e=null==(a=this.dom)?void 0:a.offsetWidth),!t&&(t=null==(n=this.dom)?void 0:n.offsetHeight),this.dispatchEvent({type:"setSize",width:e,height:t}),this)},this.setCamera=function(e){return this.currentCamera=e,this.dispatchEvent({type:"setCamera",camera:e}),this},this.setDom=function(e){return this.dom=e,e.appendChild(this.webGLRenderer.domElement),this},this.addEventListener("setSize",(function(e){var a=e.width,n=e.height;t.webGLRenderer.setSize(a,n,!0);var r=t.currentCamera;r&&(r instanceof v["Z"]?(r.aspect=e.width/e.height,r.updateProjectionMatrix()):r instanceof v["W"]&&(r.left=-a/16,r.right=a/16,r.top=n/16,r.bottom=-n/16,r.updateProjectionMatrix()))})),this.addEventListener("dispose",(function(){t.webGLRenderer.dispose()})),!0)},Ve=function(e){if(Ie.call(this,e)){var t=this.dataSupportManager.getDataSupport(ue.RENDERER).getData();return t.WebGLRenderer||(t.WebGLRenderer=Z(pe.WEBGLRENDERER)),!0}return!1};(function(e){e["WEBGLRENDERER"]="WebGLRenderer",e["SCENE"]="Scene",e["MODELINGSCENE"]="ModelingScene",e["RENDERMANAGER"]="RenderManager",e["ORBITCONTROLS"]="OrbitControls",e["STATS"]="Stats",e["EFFECTCOMPOSER"]="EffectComposer",e["POINTERMANAGER"]="PointerManager",e["EVENTMANAGER"]="EventManager",e["TRANSFORMCONTROLS"]="TransformControls"})(Ne||(Ne={}));var Be=new Map;Be.set("WebGLRenderer",Ie),Be.set("Scene",ye),Be.set("ModelingScene",de),Be.set("RenderManager",we),Be.set("OrbitControls",Se),Be.set("Stats",ke),Be.set("EffectComposer",Le),Be.set("PointerManager",Te),Be.set("EventManager",Ae),Be.set("TransformControls",Ge);var _e=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.call(this),E(Object(u["a"])(e),"completeSet"),E(Object(u["a"])(e),"dom"),E(Object(u["a"])(e),"webGLRenderer"),E(Object(u["a"])(e),"currentCamera"),E(Object(u["a"])(e),"scene"),E(Object(u["a"])(e),"orbitControls"),E(Object(u["a"])(e),"transformControls"),E(Object(u["a"])(e),"effectComposer"),E(Object(u["a"])(e),"renderManager"),E(Object(u["a"])(e),"pointerManager"),E(Object(u["a"])(e),"eventManager"),E(Object(u["a"])(e),"stats"),E(Object(u["a"])(e),"transing"),E(Object(u["a"])(e),"setSize"),E(Object(u["a"])(e),"setCamera"),E(Object(u["a"])(e),"setDom"),E(Object(u["a"])(e),"setStats"),E(Object(u["a"])(e),"setTransformControls"),E(Object(u["a"])(e),"play"),E(Object(u["a"])(e),"stop"),E(Object(u["a"])(e),"render"),e.completeSet=new Set,e.render=function(){return console.warn("can not install some plugin"),this},e}return Object(f["a"])(a,[{key:"install",value:function(e,t){return a.pluginHandler.has(e)?a.pluginHandler.get(e).call(this,t):console.error("engine can not support ".concat(e," plugin.")),this}},{key:"complete",value:function(){var e=this;return this.completeSet.forEach((function(t){t(e)})),this.completeSet=void 0,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}}]),a}(S),Fe=_e;E(Fe,"pluginHandler",Be),E(Fe,"register",(function(e,t){_e.pluginHandler&&_e.pluginHandler.set(e,t)})),E(Fe,"dispose",(function(){_e.pluginHandler=void 0}));function We(e,t){return e in t}function Ue(){var e;return e={},Object(d["a"])(e,r.IMAGETEXTURE,ue.TEXTURE),Object(d["a"])(e,r.CUBETEXTURE,ue.TEXTURE),Object(d["a"])(e,r.MESHSTANDARDMATERIAL,ue.MATERIAL),Object(d["a"])(e,r.MESHPHONGMATERIAL,ue.MATERIAL),Object(d["a"])(e,r.AMBIENTLIGHT,ue.LIGHT),Object(d["a"])(e,r.SPOTLIGHT,ue.LIGHT),Object(d["a"])(e,r.POINTLIGHT,ue.LIGHT),Object(d["a"])(e,r.BOXGEOMETRY,ue.GEOMETRY),Object(d["a"])(e,r.SPHEREGEOMETRY,ue.GEOMETRY),Object(d["a"])(e,r.LOADGEOMETRY,ue.GEOMETRY),Object(d["a"])(e,r.MODEL,ue.MODEL),Object(d["a"])(e,r.PERSPECTIVECAMERA,ue.CAMERA),Object(d["a"])(e,r.ORTHOGRAPHICCAMERA,ue.CAMERA),Object(d["a"])(e,r.WEBGLRENDERER,ue.RENDERER),Object(d["a"])(e,r.SCENE,ue.SCENE),Object(d["a"])(e,r.TRNASFORMCONTROLS,ue.CONTROLS),e}var Ye=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){return Object(h["a"])(this,a),t.call(this)}return Object(f["a"])(a,[{key:"proxyExtends",value:function(e,t){var n=this;if(t||(t=[]),a.proxyWeakSet.has(e)||"object"!==Object(m["a"])(e)&&null!==e)return e;var r={get:function(e,t){return Reflect.get(e,t)},set:function(r,i,o){var s;if(void 0===r[i]){if("object"===Object(m["a"])(o)&&null!==o){var c=t.concat([i]);o=n.proxyExtends(o,c)}s=Reflect.set(r,i,o),n.broadcast({operate:"add",path:t.concat([]),key:i,value:o})}else{if("object"===Object(m["a"])(o)&&!a.proxyWeakSet.has(e)){var u=t.concat([i]);o=n.proxyExtends(o,u)}s=Reflect.set(r,i,o),n.broadcast({operate:"set",path:t.concat([]),key:i,value:o})}return s},deleteProperty:function(e,a){var r=Reflect.deleteProperty(e,a);return n.broadcast({operate:"delete",path:t.concat([]),key:a,value:""}),r}};if("object"===Object(m["a"])(e)&&null!==e)for(var i in e){var o=t.concat([i]);We(i,e)&&"object"===Object(m["a"])(e[i])&&null!==e[i]&&(e[i]=this.proxyExtends(e[i],o))}return new Proxy(e,r)}},{key:"broadcast",value:function(e){var t=e.operate,a=e.path,n=e.key,r=e.value,i={__poto__:!0,length:!0};return We(n,i)&&i[n]||this.dispatchEvent({type:"broadcast",notice:{operate:t,path:a,key:n,value:r}}),this}}]),a}(S),$e=Ye;E($e,"proxyWeakSet",new WeakSet);var Xe=function(){function e(){Object(h["a"])(this,e),E(this,"rule"),E(this,"memberSet"),this.rule=function(){},this.memberSet=new Set}return Object(f["a"])(e,[{key:"apply",value:function(e){return this.memberSet.add(e),this}},{key:"cancel",value:function(e){return this.memberSet.delete(e),this}},{key:"setRule",value:function(e){return this.rule=e,this}},{key:"translate",value:function(e){var t=this.rule;return this.memberSet.forEach((function(a){t(e,a)})),this}}]),e}(),Je=function(){function e(t,a){var n=this;Object(h["a"])(this,e),E(this,"data"),E(this,"broadcast"),E(this,"translater"),this.translater=(new Xe).setRule(t),this.broadcast=new $e,this.data=this.broadcast.proxyExtends(a),this.broadcast.addEventListener("broadcast",(function(e){n.translater.translate(e.notice)}))}return Object(f["a"])(e,[{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){return this.data=e,this}},{key:"proxyData",value:function(e){return this.data=this.broadcast.proxyExtends(e),this.data}},{key:"addCompiler",value:function(e){return e.setTarget(this.data),e.compileAll(),this.translater.apply(e),this}},{key:"toJSON",value:function(){return JSON.stringify(this.data)}},{key:"load",value:function(e){var t=this.data;for(var a in e)t[a]=e[a];return this}}]),e}(),Ze=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qe(e){return"string"===typeof e&&Ze.test(e)}var Ke=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;"add"===a?qe(n)&&t.add(n,i):"set"===a&&t.set(r.concat([]),n,i)},Qe=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,Ke,e)}return Object(f["a"])(a)}(Je),et=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("add"===a)qe(n)&&t.add(n,i);else if("set"===a){var o=r.concat([]),s=o.shift();s&&qe(s)?t.set(s,o,n,i):console.warn("model rule vid is illeage: '".concat(s,"'"))}},tt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,et,e)}return Object(f["a"])(a)}(Je),at=/^[og]\s*(.+)?/,nt=/^mtllib /,rt=/^usemtl /,it=/^usemap /,ot=new v["zb"],st=new v["zb"],ct=new v["zb"],ut=new v["zb"],lt=new v["zb"];function pt(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var a=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==a?a.smooth:this.smooth,groupStart:void 0!==a?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},a&&a.name&&"function"===typeof a.clone){var n=a.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseNormalIndex:function(e,t){var a=parseInt(e,10);return 3*(a>=0?a-1:a+t/3)},parseUVIndex:function(e,t){var a=parseInt(e,10);return 2*(a>=0?a-1:a+t/2)},addVertex:function(e,t,a){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[a+0],n[a+1],n[a+2])},addVertexPoint:function(e){var t=this.vertices,a=this.object.geometry.vertices;a.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,a=this.object.geometry.vertices;a.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,a){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[a+0],n[a+1],n[a+2])},addFaceNormal:function(e,t,a){var n=this.vertices,r=this.object.geometry.normals;ot.fromArray(n,e),st.fromArray(n,t),ct.fromArray(n,a),lt.subVectors(ct,st),ut.subVectors(ot,st),lt.cross(ut),lt.normalize(),r.push(lt.x,lt.y,lt.z),r.push(lt.x,lt.y,lt.z),r.push(lt.x,lt.y,lt.z)},addColor:function(e,t,a){var n=this.colors,r=this.object.geometry.colors;void 0!==n[e]&&r.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&r.push(n[t+0],n[t+1],n[t+2]),void 0!==n[a]&&r.push(n[a+0],n[a+1],n[a+2])},addUV:function(e,t,a){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[a+0],n[a+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs,a=this.object.geometry.uvs;a.push(t[e+0],t[e+1])},addFace:function(e,t,a,n,r,i,o,s,c){var u=this.vertices.length,l=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),d=this.parseVertexIndex(a,u);if(this.addVertex(l,p,d),this.addColor(l,p,d),void 0!==o&&""!==o){var h=this.normals.length;l=this.parseNormalIndex(o,h),p=this.parseNormalIndex(s,h),d=this.parseNormalIndex(c,h),this.addNormal(l,p,d)}else this.addFaceNormal(l,p,d);if(void 0!==n&&""!==n){var f=this.uvs.length;l=this.parseUVIndex(n,f),p=this.parseUVIndex(r,f),d=this.parseUVIndex(i,f),this.addUV(l,p,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,a=0,n=e.length;a<n;a++){var r=this.parseVertexIndex(e[a],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var a=this.vertices.length,n=this.uvs.length,r=0,i=e.length;r<i;r++)this.addVertexLine(this.parseVertexIndex(e[r],a));for(var o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],n))}};return e.startObject("",!1),e}var dt,ht=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this,e),n.materials=null,n}return Object(f["a"])(a,[{key:"load",value:function(e,t,a,n){var r=this,i=new v["s"](this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(a){try{t(r.parse(a))}catch(i){n?n(i):console.error(i),r.manager.itemError(e)}}),a,n)}},{key:"setMaterials",value:function(e){return this.materials=e,this}},{key:"parse",value:function(e){var t=new pt;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var a=e.split("\n"),n="",r="",i=0,o=[],s="function"===typeof"".trimLeft,c=0,u=a.length;c<u;c++)if(n=a[c],n=s?n.trimLeft():n.trim(),i=n.length,0!==i&&(r=n.charAt(0),"#"!==r))if("v"===r){var l=n.split(/\s+/);switch(l[0]){case"v":t.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3])),l.length>=7?t.colors.push(parseFloat(l[4]),parseFloat(l[5]),parseFloat(l[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));break;case"vt":t.uvs.push(parseFloat(l[1]),parseFloat(l[2]));break}}else if("f"===r){for(var p=n.substr(1).trim(),d=p.split(/\s+/),h=[],f=0,m=d.length;f<m;f++){var g=d[f];if(g.length>0){var b=g.split("/");h.push(b)}}for(var y=h[0],O=1,M=h.length-1;O<M;O++){var j=h[O],w=h[O+1];t.addFace(y[0],j[0],w[0],y[1],j[1],w[1],y[2],j[2],w[2])}}else if("l"===r){var E=n.substring(1).trim().split(" "),S=[],C=[];if(-1===n.indexOf("/"))S=E;else for(var x=0,k=E.length;x<k;x++){var L=E[x].split("/");""!==L[0]&&S.push(L[0]),""!==L[1]&&C.push(L[1])}t.addLineGeometry(S,C)}else if("p"===r){var R=n.substr(1).trim(),T=R.split(" ");t.addPointGeometry(T)}else if(null!==(o=at.exec(n))){var D=(" "+o[0].substr(1).trim()).substr(1);t.startObject(D)}else if(rt.test(n))t.object.startMaterial(n.substring(7).trim(),t.materialLibraries);else if(nt.test(n))t.materialLibraries.push(n.substring(7).trim());else if(it.test(n))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===r){if(o=n.split(" "),o.length>1){var A=o[1].trim().toLowerCase();t.object.smooth="0"!==A&&"off"!==A}else t.object.smooth=!0;var P=t.object.currentMaterial();P&&(P.smooth=t.object.smooth)}else{if("\0"===n)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+n+'"')}t.finalize();var N=new v["y"];N.materialLibraries=[].concat(t.materialLibraries);var H=!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length);if(!0===H)for(var G=0,z=t.objects.length;G<z;G++){var I=t.objects[G],V=I.geometry,B=I.materials,_="Line"===V.type,F="Points"===V.type,W=!1;if(0!==V.vertices.length){var U=new v["e"];U.setAttribute("position",new v["t"](V.vertices,3)),V.normals.length>0&&U.setAttribute("normal",new v["t"](V.normals,3)),V.colors.length>0&&(W=!0,U.setAttribute("color",new v["t"](V.colors,3))),!0===V.hasUVIndices&&U.setAttribute("uv",new v["t"](V.uvs,2));for(var Y=[],$=0,X=B.length;$<X;$++){var J=B[$],Z=J.name+"_"+J.smooth+"_"+W,q=t.materials[Z];if(null!==this.materials)if(q=this.materials.create(J.name),!_||!q||q instanceof v["C"]){if(F&&q&&!(q instanceof v["db"])){var K=new v["db"]({size:10,sizeAttenuation:!1});v["K"].prototype.copy.call(K,q),K.color.copy(q.color),K.map=q.map,q=K}}else{var Q=new v["C"];v["K"].prototype.copy.call(Q,q),Q.color.copy(q.color),q=Q}void 0===q&&(q=_?new v["C"]:F?new v["db"]({size:1,sizeAttenuation:!1}):new v["P"],q.name=J.name,q.flatShading=!J.smooth,q.vertexColors=W,t.materials[Z]=q),Y.push(q)}var ee=void 0;if(Y.length>1){for(var te=0,ae=B.length;te<ae;te++){var ne=B[te];U.addGroup(ne.groupStart,ne.groupCount,te)}ee=_?new v["D"](U,Y):F?new v["cb"](U,Y):new v["M"](U,Y)}else ee=_?new v["D"](U,Y[0]):F?new v["cb"](U,Y[0]):new v["M"](U,Y[0]);ee.name=I.name,N.add(ee)}}else if(t.vertices.length>0){var re=new v["db"]({size:1,sizeAttenuation:!1}),ie=new v["e"];ie.setAttribute("position",new v["t"](t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(ie.setAttribute("color",new v["t"](t.colors,3)),re.vertexColors=!0);var oe=new v["cb"](ie,re);N.add(oe)}return N}}]),a}(v["H"]),ft=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),t.call(this,e)}return Object(f["a"])(a,[{key:"load",value:function(e,t,a,n){var r=this,i=""===this.path?v["I"].extractUrlBase(e):this.path,o=new v["s"](this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(a){try{t(r.parse(a,i))}catch(o){n?n(o):console.error(o),r.manager.itemError(e)}}),a,n)}},{key:"setMaterialOptions",value:function(e){return this.materialOptions=e,this}},{key:"parse",value:function(e,t){for(var a=e.split("\n"),n={},r=/\s+/,i={},o=0;o<a.length;o++){var s=a[o];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var c=s.indexOf(" "),u=c>=0?s.substring(0,c):s;u=u.toLowerCase();var l=c>=0?s.substring(c+1):"";if(l=l.trim(),"newmtl"===u)n={name:l},i[l]=n;else if("ka"===u||"kd"===u||"ks"===u||"ke"===u){var p=l.split(r,3);n[u]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else n[u]=l}}var d=new mt(this.resourcePath||t,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(i),d}}]),a}(v["H"]),mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(h["a"])(this,e),this.baseUrl=t,this.options=a,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:v["w"],this.wrap=void 0!==this.options.wrap?this.options.wrap:v["hb"]}return Object(f["a"])(e,[{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setManager",value:function(e){this.manager=e}},{key:"setMaterials",value:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}},{key:"convert",value:function(e){if(!this.options)return e;var t={};for(var a in e){var n=e[a],r={};for(var i in t[a]=r,n){var o=!0,s=n[i],c=i.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(o=!1);break}o&&(r[c]=s)}}return t}},{key:"preload",value:function(){for(var e in this.materialsInfo)this.create(e)}},{key:"getIndex",value:function(e){return this.nameLookup[e]}},{key:"getAsArray",value:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}},{key:"create",value:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}},{key:"createMaterial_",value:function(e){var t=this,a=this.materialsInfo[e],n={name:e,side:this.side};function r(e,t){return"string"!==typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function i(e,a){if(!n[e]){var i=t.getTextureParams(a,n),o=t.loadTexture(r(t.baseUrl,i.url));o.repeat.copy(i.scale),o.offset.copy(i.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,n[e]=o}}for(var o in a){var s=a[o],c=void 0;if(""!==s)switch(o.toLowerCase()){case"kd":n.color=(new v["j"]).fromArray(s);break;case"ks":n.specular=(new v["j"]).fromArray(s);break;case"ke":n.emissive=(new v["j"]).fromArray(s);break;case"map_kd":i("map",s);break;case"map_ks":i("specularMap",s);break;case"map_ke":i("emissiveMap",s);break;case"norm":i("normalMap",s);break;case"map_bump":case"bump":i("bumpMap",s);break;case"map_d":i("alphaMap",s),n.transparent=!0;break;case"ns":n.shininess=parseFloat(s);break;case"d":c=parseFloat(s),c<1&&(n.opacity=c,n.transparent=!0);break;case"tr":c=parseFloat(s),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(n.opacity=1-c,n.transparent=!0);break}}return this.materials[e]=new v["P"](n),this.materials[e]}},{key:"getTextureParams",value:function(e,t){var a,n={scale:new v["yb"](1,1),offset:new v["yb"](0,0)},r=e.split(/\s+/);return a=r.indexOf("-bm"),a>=0&&(t.bumpScale=parseFloat(r[a+1]),r.splice(a,2)),a=r.indexOf("-s"),a>=0&&(n.scale.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),a=r.indexOf("-o"),a>=0&&(n.offset.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),n.url=r.join(" ").trim(),n}},{key:"loadTexture",value:function(e,t,a,n,r){var i=void 0!==this.manager?this.manager:v["m"],o=i.getHandler(e);null===o&&(o=new v["ub"](i)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);var s=o.load(e,a,n,r);return void 0!==t&&(s.mapping=t),s}}]),e}(),vt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;Object(h["a"])(this,a),e=t.call(this),E(Object(u["a"])(e),"resourceMap"),E(Object(u["a"])(e),"loaderMap"),E(Object(u["a"])(e),"loadTotal"),E(Object(u["a"])(e),"loadSuccess"),E(Object(u["a"])(e),"loadError"),E(Object(u["a"])(e),"isError"),E(Object(u["a"])(e),"isLoading"),E(Object(u["a"])(e),"isLoaded"),E(Object(u["a"])(e),"loadDetailMap"),e.resourceMap=new Map,e.loadTotal=0,e.loadSuccess=0,e.loadError=0,e.isError=!1,e.isLoading=!1,e.isLoaded=!1,e.loadDetailMap={};var n=new v["z"];return e.loaderMap={jpg:n,png:n,jpeg:n,obj:new ht,mtl:new ft},e}return Object(f["a"])(a,[{key:"loaded",value:function(){return this.dispatchEvent({type:be.LOADED,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError,resourceMap:this.resourceMap}),this}},{key:"checkLoaded",value:function(){return this.loadTotal===this.loadSuccess+this.loadError&&(this.isError=!0,this.isLoaded=!0,this.isLoading=!1,this.loaded()),this}},{key:"load",value:function(e){var t,a=this;if(this.reset(),this.isLoading=!0,e.length<=0)return this.checkLoaded(),console.warn("url list is empty."),this;this.loadTotal+=e.length;var n,r=this.resourceMap,o=this.loaderMap,s=this.loadDetailMap,c=Object(i["a"])(e);try{var u=function(){var e=n.value,i={url:e,progress:0,error:!1,message:e};if(s[e]=i,r.has(e))return i.progress=1,a.loadSuccess+=1,a.dispatchEvent({type:be.DETAILLOADED,detail:i}),a.dispatchEvent({type:be.LOADING,loadTotal:a.loadTotal,loadSuccess:a.loadSuccess,loadError:a.loadError}),a.checkLoaded(),"continue";var c=null==(t=e.split(".").pop())?void 0:t.toLocaleLowerCase();if(!c)return i.message="url: ".concat(e," 地址有误，无法获取文件格式。"),i.error=!0,a.isError=!0,a.loadError+=1,"continue";var u=o[c];if(!u)return i.message="url: ".concat(e," 不支持此文件格式加载。"),i.error=!0,a.isError=!0,a.loadError+=1,"continue";u.loadAsync(e,(function(e){i.progress=Number((e.loaded/e.total).toFixed(2)),a.dispatchEvent({type:be.DETAILLOADING,detail:i})})).then((function(t){i.progress=1,a.loadSuccess+=1,a.resourceMap.set(e,t),a.dispatchEvent({type:be.DETAILLOADED,detail:i}),a.dispatchEvent({type:be.LOADING,loadTotal:a.loadTotal,loadSuccess:a.loadSuccess,loadError:a.loadError}),a.checkLoaded()})).catch((function(e){i.error=!0,i.message=JSON.stringify(e),a.loadError+=1,a.dispatchEvent({type:be.DETAILLOADED,detail:i}),a.dispatchEvent({type:be.LOADING,loadTotal:a.loadTotal,loadSuccess:a.loadSuccess,loadError:a.loadError}),a.checkLoaded()}))};for(c.s();!(n=c.n()).done;)u()}catch(l){c.e(l)}finally{c.f()}return this}},{key:"reset",value:function(){return this.loadTotal=0,this.loadSuccess=0,this.loadError=0,this.isError=!1,this.isLoading=!1,this.isLoaded=!1,this.loadDetailMap={},this}},{key:"register",value:function(e,t){return this.loaderMap[e]=t,this}},{key:"hasLoaded",value:function(e){return this.resourceMap.has(e)}},{key:"getResource",value:function(e){return this.resourceMap.get(e)}},{key:"getLoadDetailMap",value:function(){return this.loadDetailMap}},{key:"setLoadDetailMap",value:function(e){return this.loadDetailMap=e,this}},{key:"dispose",value:function(){return this.resourceMap.clear(),this}}]),a}(S);(function(e){e["MAPPED"]="mapped"})(dt||(dt={}));var gt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(h["a"])(this,a),e=t.call(this),E(Object(u["a"])(e),"structureMap",new Map),E(Object(u["a"])(e),"configMap",new Map),E(Object(u["a"])(e),"resourceMap",new Map),e}return Object(f["a"])(a,[{key:"mappingResource",value:function(e){var t=this.structureMap,a=this.configMap,n=this.resourceMap,i=function e(t,i){var o={type:"".concat(i.type)},s="";if(i.geometry){var c=i.geometry;c.computeBoundingBox();var u=c.boundingBox,l=u.getCenter(new v["zb"]);s="".concat(t,".geometry"),n.set(s,c),a.set(s,Z(r.LOADGEOMETRY,{url:s,position:{x:l.x/(u.max.x-u.min.x)*2,y:l.y/(u.max.y-u.min.y)*2,z:l.z/(u.max.z-u.min.z)*2}})),o.geometry=s}if(i.material){var p=i.material;p instanceof Array?(o.material=[],p.forEach((function(e,r,i){s="".concat(t,".material.").concat(r),n.set(s,e),a.set(s,Z(e.type,e,!1)),o.material[r]=s}))):(s="".concat(t,".material"),n.set(s,p),a.set(s,Z(p.type,p,!1)),o.material=s)}return i.children.length&&(o.children=[],i.children.forEach((function(a,n,r){s="".concat(t,".children.").concat(n),o.children[n]=e(s,a)}))),o};return e.forEach((function(e,o){e instanceof HTMLImageElement?(n.set(o,e),a.set(o,Z(r.IMAGETEXTURE,{image:o})),t.set(o,o)):e instanceof HTMLCanvasElement?(n.set(o,e),t.set(o,o)):e instanceof v["T"]&&t.set(o,i(o,e))})),this.dispatchEvent({type:"mapped",structureMap:t,configMap:a,resourceMap:n}),this}},{key:"dispose",value:function(){}}]),a}(S),bt=function(){function e(){Object(h["a"])(this,e)}return Object(f["a"])(e,null,[{key:"applyConfig",value:function(e,t,a){var n={vid:!0,type:!0},r=function e(t,a){for(var r in t)"object"===Object(m["a"])(t[r])&&null!==typeof t[r]&&We(r,a)?e(t[r],a[r]):We(r,a)&&!n[r]&&(a[r]=t[r])};r(e,t),a&&a()}}]),e}(),yt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"scene"),E(Object(u["a"])(n),"engine"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"weakMap"),E(Object(u["a"])(n),"constructMap"),E(Object(u["a"])(n),"objectMapSet"),e?(e.target&&(n.target=e.target),e.scene&&(n.scene=e.scene),e.engine&&(n.engine=e.engine)):(n.scene=new v["ib"],n.target={},n.engine=(new Fe).install(Ne.WEBGLRENDERER)),n.map=new Map,n.weakMap=new WeakMap;var r=new Map;return r.set("PerspectiveCamera",(function(){return new v["Z"]})),r.set("OrthographicCamera",(function(){return new v["W"](0,0,0,0)})),n.constructMap=r,n.objectMapSet=new Set,n}return Object(f["a"])(a,[{key:"setLookAt",value:function(e,t){if(e===t)return console.error("can not set object lookAt itself."),this;var a=this.map.get(e),n=a.userData;if(!t)return n.updateMatrixWorldFun?(a.updateMatrixWorld=n.updateMatrixWorldFun,n.lookAtTarget=void 0,n.updateMatrixWorldFun=void 0,this):this;var r,o=void 0,s=Object(i["a"])(this.objectMapSet);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.has(t)){o=c.get(t);break}}}catch(l){s.e(l)}finally{s.f()}if(!o)return console.warn("camera compiler can not found this vid mapping object in objectMapSet: '".concat(e,"'")),this;var u=a.updateMatrixWorld;return n.updateMatrixWorldFun=u,n.lookAtTarget=o.position,a.updateMatrixWorld=function(e){u.bind(a)(e),a.lookAt(n.lookAtTarget)},this}},{key:"setAdaptiveWindow",value:function(e,t){if(!qe(e))return console.error("camera compiler adaptive window vid is illeage: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("camera compiler can not found this vid camera: '".concat(e,"'")),this;var a=this.map.get(e);if(!t){if(a.userData.setSizeFun&&this.engine.hasEventListener("setSize",a.userData.setSizeFun))return this.engine.removeEventListener("setSize",a.userData.setSizeFun),a.userData.setSizeFun=void 0,this;if(!a.userData.setSizeFun&&!this.engine.hasEventListener("setSize",a.userData.setSizeFun))return this;if(a.userData.setSizeFun&&!this.engine.hasEventListener("setSize",a.userData.setSizeFun))return a.userData.setSizeFun=void 0,this}if(t){if(a.userData.setSizeFun&&this.engine.hasEventListener("setSize",a.userData.setSizeFun))return this;if(!this.engine.hasEventListener("setSize",a.userData.setSizeFun)&&a.userData.setSizeFun)return this.engine.addEventListener("setSize",a.userData.setSizeFun),this;var n=function(e){};a instanceof v["Z"]?n=function(e){a.aspect=e.width/e.height,a.updateProjectionMatrix()}:a instanceof v["W"]?n=function(e){var t=e.width,n=e.height;a.left=-t/16,a.right=t/16,a.top=n/16,a.bottom=-n/16}:console.warn("camera compiler can not support this class camera:",a),this.engine.addEventListener("setSize",n);var r=this.engine.webGLRenderer.domElement;n({type:"setSize",width:r.offsetWidth,height:r.offsetHeight})}return this}},{key:"linkObjectMap",value:function(e){return this.objectMapSet.has(e)||this.objectMapSet.add(e),this}},{key:"getSupportVid",value:function(e){return this.weakMap.has(e)?this.weakMap.get(e):null}},{key:"add",value:function(e,t){if(qe(e)){if(t.type&&this.constructMap.has(t.type)){var a=this.constructMap.get(t.type)(),n=JSON.parse(JSON.stringify(t));delete n.vid,delete n.type,delete n.lookAt,delete n.adaptiveWindow,bt.applyConfig(n,a),(a instanceof v["Z"]||a instanceof v["W"])&&a.updateProjectionMatrix(),this.map.set(e,a),this.setLookAt(t.vid,t.lookAt),this.setAdaptiveWindow(t.vid,t.adaptiveWindow),this.scene.add(a)}}else console.error("camera vid parameter is illegal: ".concat(e));return this}},{key:"set",value:function(e,t,a,n){if(!qe(e))return console.warn("camera compiler set function vid parameters is illeage: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("geometry compiler set function can not found vid geometry: '".concat(e,"'")),this;if("lookAt"===a)return this.setLookAt(e,n);if("adaptiveWindow"===a)return this.setAdaptiveWindow(e,n);var r=this.map.get(e),i=r;return t.forEach((function(e,t,a){i=r[e]})),i[a]=n,(r instanceof v["Z"]||r instanceof v["W"])&&r.updateProjectionMatrix(),this}},{key:"remove",value:function(){}},{key:"setEngine",value:function(e){return this.engine=e,this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"getMap",value:function(){return this.map}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),Ot=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"transformControls"),e?(e.target&&(n.target=e.target),e.transformControls&&(n.transformControls=e.transformControls)):(n.target={TransformControls:$()},n.transformControls=new M["a"](new v["f"])),n}return Object(f["a"])(a,[{key:"set",value:function(e,t,a,n){if("TransformControls"!==e)return console.warn("controls compiler can not support this controls: '".concat(e,"'")),this;var r=this.transformControls;if("snapAllow"===a){var i=this.target["TransformControls"];return n?(r.translationSnap=i.translationSnap,r.rotationSnap=i.rotationSnap,r.scaleSnap=i.scaleSnap):(r.translationSnap=null,r.rotationSnap=null,r.scaleSnap=null),this}return r[a]=n,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"compileAll",value:function(){return this}},{key:"dispose",value:function(e){return this}}]),a}(bt),Mt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"type","LoadBufferGeometry"),e&&n.copy(e),n}return Object(f["a"])(a)}(v["e"]),jt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"constructMap"),E(Object(u["a"])(n),"resourceMap"),E(Object(u["a"])(n),"replaceGeometry"),n.target=e.target,n.map=new Map;var r=new Map;return r.set("BoxGeometry",(function(e){return a.transfromAnchor(new v["c"](e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments),e)})),r.set("SphereGeometry",(function(e){return a.transfromAnchor(new v["lb"](e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength),e)})),r.set("LoadGeometry",(function(e){return a.transfromAnchor(new Mt(n.getRescource(e.url)),e)})),n.constructMap=r,n.resourceMap=new Map,n.replaceGeometry=new v["c"](10,10,10),n}return Object(f["a"])(a,[{key:"linkRescourceMap",value:function(e){return this.resourceMap=e,this}},{key:"getRescource",value:function(e){if(!this.resourceMap.has(e))return console.error("rescoure can not found url: ".concat(e)),this.replaceGeometry.clone();if(this.resourceMap.has(e)&&this.resourceMap.get(e)instanceof v["e"]){var t=this.resourceMap.get(e);return t.clone()}return console.error("url mapping rescource is not class with BufferGeometry: ".concat(e)),this.replaceGeometry.clone()}},{key:"getMap",value:function(){return this.map}},{key:"setTarget",value:function(){return this}},{key:"add",value:function(e,t){if(qe(e)){if(t.type&&this.constructMap.has(t.type)){var a=this.constructMap.get(t.type)(t);this.map.set(e,a)}}else console.error("geometry vid parameter is illegal: ".concat(e));return this}},{key:"set",value:function(e,t,a){if(!qe(e))return console.warn("geometry compiler set function vid parameters is illeage: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("geometry compiler set function can not found vid geometry: '".concat(e,"'")),this;var n=this.map.get(e),r=this.target[e],i=this.constructMap.get(r.type)(r);return n.copy(i),n.uuid=i.uuid,i.dispose(),this}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),wt=jt;E(wt,"transfromAnchor",(function(e,t){e.center(),!e.boundingBox&&e.computeBoundingBox();var a=e.boundingBox,n=t.position,r=t.rotation,i=t.scale,o=new v["L"],s=new v["zb"]((a.max.x-a.min.x)/2*n.x,(a.max.y-a.min.y)/2*n.y,(a.max.z-a.min.z)/2*n.z),c=(new v["eb"]).setFromEuler(new v["q"](r.x,r.y,r.z,"XYZ")),u=new v["zb"](i.x,i.y,i.z);return o.compose(s,c,u),e.applyMatrix4(o),e}));var Et=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"scene"),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"weakMap"),E(Object(u["a"])(n),"constructMap"),n.scene=e.scene,n.target=e.target,n.map=new Map,n.weakMap=new WeakMap,n.constructMap=new Map,n.constructMap.set("PointLight",(function(){return new v["bb"]})),n.constructMap.set("SpotLight",(function(){return new v["ob"]})),n.constructMap.set("AmbientLight",(function(){return new v["a"]})),n}return Object(f["a"])(a,[{key:"getSupportVid",value:function(e){return this.weakMap.has(e)?this.weakMap.get(e):null}},{key:"add",value:function(e,t){if(qe(e)){if(t.type&&this.constructMap.has(t.type)){var a=this.constructMap.get(t.type)();bt.applyConfig(t,a),a.color=new v["j"](t.color),this.map.set(e,a),this.weakMap.set(a,e),this.scene.add(a)}}else console.error("vid parameter is illegal: ".concat(e))}},{key:"set",value:function(e,t,a){var n=e.shift();if(qe(n)&&this.map.has(n)){var r=this.map.get(n);e.forEach((function(e,t,a){r=r[e]})),r[t]=a}else console.error("vid parameter is illegal: ".concat(n," or can not found this vid light"))}},{key:"remove",value:function(){}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"getMap",value:function(){return this.map}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),St=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"constructMap"),E(Object(u["a"])(n),"mapAttribute"),E(Object(u["a"])(n),"colorAttribute"),E(Object(u["a"])(n),"texturelMap"),E(Object(u["a"])(n),"resourceMap"),E(Object(u["a"])(n),"cachaColor"),e?e.target&&(n.target=e.target):n.target={},n.map=new Map,n.texturelMap=new Map,n.resourceMap=new Map,n.cachaColor=new v["j"];var r=new Map;return r.set("MeshStandardMaterial",(function(){return new v["Q"]})),n.constructMap=r,n.colorAttribute={color:!0,emissive:!0},n.mapAttribute={roughnessMap:!0,normalMap:!0,metalnessMap:!0,map:!0,lightMap:!0,envMap:!0,emissiveMap:!0,displacementMap:!0,bumpMap:!0,alphaMap:!0,aoMap:!0},n}return Object(f["a"])(a,[{key:"linkRescourceMap",value:function(e){return this.resourceMap=e,this}},{key:"linkTextureMap",value:function(e){return this.texturelMap=e,this}},{key:"add",value:function(e,t){if(qe(e))if(t.type&&this.constructMap.has(t.type)){var a=this.constructMap.get(t.type)(),n=JSON.parse(JSON.stringify(t));delete n.type,delete n.vid;var r=this.colorAttribute;for(var i in r)n[i]&&(a[i]=new v["j"](n[i]),delete n[i]);var o=this.mapAttribute;for(var s in o)n[s]&&(a[s]=this.getTexture(n[s]),delete n[s]);bt.applyConfig(n,a),a.needsUpdate=!0,this.map.set(e,a)}else console.warn("material compiler can not support this type: ".concat(t.type));else console.error("material vid parameter is illegal: ".concat(e));return this}},{key:"set",value:function(e,t,a,n){if(!qe(e))return console.warn("material compiler set function: vid is illeage: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("material compiler set function: can not found material which vid is: '".concat(e,"'")),this;var r=this.map.get(e);if(this.colorAttribute[a])return r[a]=new v["j"](n),this;if(this.mapAttribute[a])return r[a]=this.getTexture(n),r.needsUpdate=!0,this;var i=r;return t.forEach((function(e,t,a){i=i[e]})),i[a]=n,this}},{key:"getTexture",value:function(e){if(this.texturelMap.has(e)){var t=this.texturelMap.get(e);return t instanceof v["tb"]?t:(console.error("this object which mapped by vid is not instance of Texture: ".concat(e)),null)}return console.error("texture map can not found this vid: ".concat(e)),null}},{key:"getMap",value:function(){return this.map}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),Ct=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"scene"),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"weakMap"),E(Object(u["a"])(n),"constructMap"),E(Object(u["a"])(n),"geometryMap"),E(Object(u["a"])(n),"materialMap"),E(Object(u["a"])(n),"objectMapSet"),E(Object(u["a"])(n),"getReplaceMaterial"),E(Object(u["a"])(n),"getReplaceGeometry"),e?(e.scene&&(n.scene=e.scene),e.target&&(n.target=e.target),e.geometryMap&&(n.geometryMap=e.geometryMap),e.materialMap&&(n.materialMap=e.materialMap)):(n.scene=new v["ib"],n.target={},n.geometryMap=new Map,n.materialMap=new Map),n.map=new Map,n.weakMap=new WeakMap,n.getReplaceMaterial=function(){return new v["Q"]({color:"rgb(150, 150, 150)"})},n.getReplaceGeometry=function(){return new v["c"](10,10,10)};var r=new Map;return r.set("Mesh",(function(e){return new v["M"](n.getGeometry(e.geometry),n.getMaterial(e.material))})),r.set("Line",(function(e){return new v["B"](n.getGeometry(e.geometry),n.getMaterial(e.material))})),r.set("Points",(function(e){return new v["cb"](n.getGeometry(e.geometry),n.getMaterial(e.material))})),n.constructMap=r,n.objectMapSet=new Set,n}return Object(f["a"])(a,[{key:"getMaterial",value:function(e){return qe(e)?this.materialMap.has(e)?this.materialMap.get(e):(console.warn("can not found material which vid: ".concat(e)),this.getReplaceMaterial()):(console.warn("material vid parameter is illegal: ".concat(e)),this.getReplaceMaterial())}},{key:"getGeometry",value:function(e){return qe(e)?this.geometryMap.has(e)?this.geometryMap.get(e):(console.warn("can not found geometry which vid: ".concat(e)),this.getReplaceGeometry()):(console.warn("geometry vid parameter is illegal: ".concat(e)),this.getReplaceGeometry())}},{key:"setLookAt",value:function(e,t){if(e===t)return console.error("can not set object lookAt itself."),this;var a=this.map.get(e),n=a.userData;if(!t)return n.updateMatrixWorldFun?(a.updateMatrixWorld=n.updateMatrixWorldFun,n.lookAtTarget=null,n.updateMatrixWorldFun=null,this):this;var r,o=null,s=Object(i["a"])(this.objectMapSet);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.has(t)){o=c.get(t);break}}}catch(l){s.e(l)}finally{s.f()}if(!o)return console.warn("model compiler can not found this vid mapping object in objectMapSet: '".concat(e,"'")),this;var u=a.updateMatrixWorld;return n.updateMatrixWorldFun=u,n.lookAtTarget=o.position,a.updateMatrixWorld=function(e){u.bind(a)(e),a.lookAt(n.lookAtTarget)},this}},{key:"setMaterial",value:function(e,t){return this.map.get(e).material=this.getMaterial(t),this}},{key:"getSupportVid",value:function(e){return this.weakMap.has(e)?this.weakMap.get(e):null}},{key:"add",value:function(e,t){if(qe(e)){if(t.type&&this.constructMap.has(t.display)){var a=this.constructMap.get(t.display)(t),n=JSON.parse(JSON.stringify(t));delete n.vid,delete n.type,delete n.display,delete n.geometry,delete n.material,delete n.lookAt,bt.applyConfig(n,a),this.map.set(e,a),this.weakMap.set(a,e),this.setLookAt(e,t.lookAt),this.scene.add(a)}}else console.warn("model compiler add function: model vid parameter is illegal: ".concat(e));return this}},{key:"set",value:function(e,t,a,n){if(!qe(e))return console.warn("model compiler vid is illegal: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("model compiler can not found this vid mapping object: '".concat(e,"'")),this;if("lookAt"===a)return this.setLookAt(e,n);if("material"===a)return this.setMaterial(e,n);var r=this.map.get(e);return t.forEach((function(e,t,a){r=r[e]})),r[a]=n,this}},{key:"remove",value:function(){}},{key:"linkGeometryMap",value:function(e){return this.geometryMap=e,this}},{key:"linkMaterialMap",value:function(e){return this.materialMap=e,this}},{key:"linkObjectMap",value:function(e){return this.objectMapSet.has(e)||this.objectMapSet.add(e),this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"getMap",value:function(){return this.map}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),xt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"glRenderer"),E(Object(u["a"])(n),"engine"),E(Object(u["a"])(n),"glRendererCacheData"),e?(e.target&&(n.target=e.target),e.glRenderer&&(n.glRenderer=e.glRenderer),e.engine&&(n.engine=e.engine)):(n.target={WebGLRenderer:U()},n.glRenderer=new v["Cb"]),n.glRendererCacheData={},n}return Object(f["a"])(a,[{key:"setClearColor",value:function(e){var t=Number(e.slice(0,-1).split(",").pop().trim());return this.glRenderer.setClearColor(e,t),this.glRenderer.clear(),this}},{key:"setPixelRatio",value:function(e){return this.glRenderer.setPixelRatio(e),this.glRenderer.clear(),this}},{key:"setSize",value:function(e){var t=this.glRenderer;if(e)t.setSize(e.x,e.y);else{var a=t.domElement;t.setSize(a.offsetWidth,a.offsetHeight)}return this}},{key:"setViewpoint",value:function(e){var t=this.glRenderer;if(e)t.setViewport(e.x,e.y,e.width,e.height);else{var a=t.domElement;t.setViewport(0,0,a.offsetWidth,a.offsetHeight)}return this}},{key:"setScissor",value:function(e){var t=this.glRenderer;if(e)t.setScissorTest(!0),t.setScissor(e.x,e.y,e.width,e.height);else{t.setScissorTest(!1);var a=t.domElement;t.setScissor(0,0,a.offsetWidth,a.offsetHeight)}return this}},{key:"setAdaptiveCamera",value:function(e){if(!this.engine)return console.warn("renderer compiler is not set engine."),this;var t=this.glRenderer,a=this.engine,n=a.renderManager;if(!e){if(!this.glRendererCacheData.adaptiveCameraFun)return this;if(this.glRendererCacheData.adaptiveCameraFun)return n.removeEventListener(fe.RENDER,this.glRendererCacheData.adaptiveCameraFun),this.glRendererCacheData.adaptiveCameraFun=void 0,this}if(e){if(this.glRendererCacheData.adaptiveCameraFun)return n.addEventListener(fe.RENDER,this.glRendererCacheData.adaptiveCameraFun),this;var r=function(e){var n=a.currentCamera,r=t.domElement.offsetWidth,i=t.domElement.offsetHeight,o=0,s=0,c=0,u=0,l=0;if(n instanceof v["Z"])l=n.aspect;else{if(!(n instanceof v["W"]))return void console.warn("renderer compiler can not support this camera",n);o=n.right-n.left,s=n.top-n.bottom,l=o/s}l>=1?(o=r,s=o/l,u=i/2-s/2):(s=i,o=s*l,c=r/2-o/2),t.setScissor(c,u,o,s),t.setViewport(c,u,o,s),t.setScissorTest(!0)};this.glRendererCacheData.adaptiveCameraFun=r,n.addEventListener(fe.RENDER,this.glRendererCacheData.adaptiveCameraFun)}return this}},{key:"set",value:function(e,t,a){var n=this,r=e.shift();if("WebGLRenderer"===r){var i=this.target.WebGLRenderer,o={clearColor:function(){return n.setClearColor(a)},pixelRatio:function(){return n.setPixelRatio(a)},size:function(){return n.setSize(i.size)},viewport:function(){return n.setViewpoint(i.viewport)},scissor:function(){return n.setScissor(i.scissor)},adaptiveCamera:function(){return n.setAdaptiveCamera(a)}};if(o[e[0]||t])return o[e[0]||t](),this;var s=this.glRenderer,c=s;return e.forEach((function(e,t,a){c=c[e]})),c[t]=a,s.clear(),this}return console.warn("renderer compiler can not support this type: ".concat(r)),this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"compileAll",value:function(){var e=this.target,t=e.WebGLRenderer;this.setClearColor(t.clearColor),this.setPixelRatio(t.pixelRatio),this.setSize(t.size),this.setViewpoint(t.viewport),this.setScissor(t.scissor),this.setAdaptiveCamera(t.adaptiveCamera);var a=JSON.parse(JSON.stringify(t));return delete a.vid,delete a.type,delete a.clearColor,delete a.pixelRatio,delete a.size,delete a.viewport,delete a.scissor,delete a.adaptiveCamera,bt.applyConfig(a,this.glRenderer),this.glRenderer.clear(),this}},{key:"dispose",value:function(){return this}}]),a}(bt),kt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"textureMap"),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"scene"),E(Object(u["a"])(n),"fogCache"),e?(e.target&&(n.target=e.target),e.scene&&(n.scene=e.scene)):(n.target={scene:Y()},n.scene=new v["ib"]),n.textureMap=new Map,n.fogCache=null,n}return Object(f["a"])(a,[{key:"background",value:function(e){e?qe(e)?this.textureMap.has(e)?this.scene.background=this.textureMap.get(e):console.warn("scene compiler can not found this vid texture : '".concat(e,"'")):this.scene.background=new v["j"](e):this.scene.background=null}},{key:"environment",value:function(e){e?qe(e)?this.textureMap.has(e)?this.scene.environment=this.textureMap.get(e):console.warn("scene compiler can not found this vid texture : '".concat(e,"'")):console.warn("this vid is illegal: '".concat(e,"'")):this.scene.environment=null}},{key:"fog",value:function(e){if(e)if("Fog"===e.type)if(this.fogCache instanceof v["u"]){var t=this.fogCache;t.color=new v["j"](e.color),t.near=e.near,t.far=e.far}else this.scene.fog=new v["u"](e.color,e.near,e.far),this.fogCache=this.scene.fog;else if("FogExp2"===e.type)if(this.fogCache instanceof v["v"]){var a=this.fogCache;a.color=new v["j"](e.color),a.density=e.density}else this.scene.fog=new v["v"](e.color,e.density),this.fogCache=this.scene.fog;else console.warn("scene compiler can not support this type fog:'".concat(e.type,"'"));else this.scene.fog=null}},{key:"linkTextureMap",value:function(e){return this.textureMap=e,this}},{key:"set",value:function(e,t,a){var n=this,r=e.shift();if("scene"===r){var i={background:function(){return n.background(a)},environment:function(){return n.environment(a)},fog:function(){return n.fog(n.target.scene.fog)}};return i[t]&&i[t](),this}return console.warn("scene compiler can not support this type: ".concat(r)),this}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"compileAll",value:function(){var e=this.target.scene;return this.background(e.background),this.environment(e.environment),this.fog(e.fog),this}},{key:"dispose",value:function(){return this}}]),a}(bt),Lt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e,n,r,i,o,s,c,u,l,p){return Object(h["a"])(this,a),t.call(this,e,n,r,i,o,s,c,u,l,p)}return Object(f["a"])(a)}(v["tb"]),Rt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"target"),E(Object(u["a"])(n),"map"),E(Object(u["a"])(n),"constructMap"),E(Object(u["a"])(n),"resourceMap"),e?e.target&&(n.target=e.target):n.target={},n.map=new Map,n.resourceMap=new Map;var r=new Map;return r.set("ImageTexture",(function(){return new Lt})),r.set("CubeTexture",(function(){return new v["k"]})),n.constructMap=r,n}return Object(f["a"])(a,[{key:"getResource",value:function(e){var t=this.resourceMap;if(t.has(e)){var a=t.get(e);return a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?a:(console.error("this url mapping resource is not a texture image class: ".concat(e)),null)}return console.warn("resource can not font url: ".concat(e)),null}},{key:"linkRescourceMap",value:function(e){return this.resourceMap=e,this}},{key:"add",value:function(e,t){if(qe(e))if(t.type&&this.constructMap.has(t.type)){var a=this.constructMap.get(t.type)(),n=JSON.parse(JSON.stringify(t));if(delete n.type,delete n.vid,"ImageTexture"===t.type)a.image=this.getResource(n.url),delete n.url;else if("CubeTexture"===t.type){var r=t.cube,i=[this.getResource(r.px),this.getResource(r.nx),this.getResource(r.py),this.getResource(r.ny),this.getResource(r.pz),this.getResource(r.nz)];a.image=i,delete n.cube}bt.applyConfig(n,a),a.needsUpdate=!0,this.map.set(e,a)}else console.warn("texture compiler can not support this type: ".concat(t.type));else console.error("texture vid parameter is illegal: ".concat(e));return this}},{key:"set",value:function(e,t,a,n){if(!qe(e))return console.warn("texture compiler set function: vid is illeage: '".concat(e,"'")),this;if(!this.map.has(e))return console.warn("texture compiler set function: can not found texture which vid is: '".concat(e,"'")),this;var r=this.map.get(e),i=r;return t.forEach((function(e,t,a){i=i[e]})),i[a]=n,r.needsUpdate=!0,this}},{key:"getMap",value:function(){return this.map}},{key:"setTarget",value:function(e){return this.target=e,this}},{key:"compileAll",value:function(){var e=this.target;for(var t in e)this.add(t,e[t]);return this}},{key:"dispose",value:function(){return this}}]),a}(bt),Tt=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("add"===a)qe(n)&&t.add(n,i);else if("set"===a){var o=r.concat([]),s=o.shift();if(!s||!qe(s))return void console.warn("texture rule vid is illeage: '".concat(s,"'"));t.set(s,o,n,i)}},Dt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,Tt,e)}return Object(f["a"])(a)}(Je),At=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("add"===a)qe(n)&&t.add(n,i);else if("set"===a){var o=r.concat([]),s=o.shift();if(!s||!qe(s))return void console.warn("material rule vid is illeage: '".concat(s,"'"));t.set(s,o,n,i)}},Pt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,At,e)}return Object(f["a"])(a)}(Je),Nt=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("add"===a)qe(n)&&t.add(n,i);else if("set"===a){var o=r.concat([]),s=o.shift();if(!s||!qe(s))return void console.warn("geometry rule vid is illeage: '".concat(s,"'"));t.set(s,o,i)}},Ht=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,Nt,e)}return Object(f["a"])(a)}(Je),Gt=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("add"===a)qe(n)&&t.add(n,i);else if("set"===a){var o=r.concat([]),s=o.shift();s&&qe(s)?t.set(s,o,n,i):console.warn("camera rule vid is illeage: '".concat(s,"'"))}},zt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,Gt,e)}return Object(f["a"])(a)}(Je),It=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;"set"===a&&t.set(r.concat([]),n,i)},Vt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,It,e)}return Object(f["a"])(a)}(Je),Bt=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;"set"===a&&t.set(r.concat([]),n,i)},_t=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={scene:Y()}),t.call(this,Bt,e)}return Object(f["a"])(a)}(Je),Ft=function(e,t){var a=e.operate,n=e.key,r=e.path,i=e.value;if("set"===a){var o=r.concat([]),s=o.shift();s?t.set(s,o,n,i):console.error("controls rule can not found controls type in set operate.")}},Wt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){return Object(h["a"])(this,a),!e&&(e={}),t.call(this,Ft,e)}return Object(f["a"])(a)}(Je),Ut=function(){function e(t){var a=this;Object(h["a"])(this,e),E(this,"cameraDataSupport"),E(this,"lightDataSupport"),E(this,"geometryDataSupport"),E(this,"modelDataSupport"),E(this,"textureDataSupport"),E(this,"materialDataSupport"),E(this,"rendererDataSupport"),E(this,"sceneDataSupport"),E(this,"controlsDataSupport"),E(this,"dataSupportMap"),t?Object.keys(t).forEach((function(e){a[e]=t[e]})):(this.cameraDataSupport=new zt,this.lightDataSupport=new Qe,this.geometryDataSupport=new Ht,this.modelDataSupport=new tt,this.textureDataSupport=new Dt,this.materialDataSupport=new Pt,this.rendererDataSupport=new Vt,this.sceneDataSupport=new _t,this.controlsDataSupport=new Wt);var n=new Map;n.set(ue.CAMERA,this.cameraDataSupport),n.set(ue.LIGHT,this.lightDataSupport),n.set(ue.GEOMETRY,this.geometryDataSupport),n.set(ue.MODEL,this.modelDataSupport),n.set(ue.TEXTURE,this.textureDataSupport),n.set(ue.MATERIAL,this.materialDataSupport),n.set(ue.RENDERER,this.rendererDataSupport),n.set(ue.SCENE,this.sceneDataSupport),n.set(ue.CONTROLS,this.controlsDataSupport),this.dataSupportMap=n}return Object(f["a"])(e,[{key:"getDataSupport",value:function(e){return this.dataSupportMap.has(e)?this.dataSupportMap.get(e):(console.warn("can not found this type in dataSupportManager: ".concat(e)),null)}},{key:"getSupportData",value:function(e){return this.dataSupportMap.has(e)?this.dataSupportMap.get(e).getData():(console.warn("can not found this type in dataSupportManager: ".concat(e)),null)}},{key:"setSupportData",value:function(e,t){return this.dataSupportMap.has(e)?this.dataSupportMap.get(e).setData(t):console.warn("can not found this type in dataSupportManager: ".concat(e)),this}},{key:"load",value:function(e){return e.camera&&this.cameraDataSupport.load(e.camera),e.geometry&&this.geometryDataSupport.load(e.geometry),e.light&&this.lightDataSupport.load(e.light),e.material&&this.materialDataSupport.load(e.material),e.model&&this.modelDataSupport.load(e.model),e.texture&&this.textureDataSupport.load(e.texture),e.renderer&&this.rendererDataSupport.load(e.renderer),e.scene&&this.sceneDataSupport.load(e.scene),e.controls&&this.controlsDataSupport.load(e.controls),this}},{key:"toJSON",value:function(){var e,t=(e={},Object(d["a"])(e,ue.RENDERER,this.rendererDataSupport.toJSON()),Object(d["a"])(e,ue.SCENE,this.sceneDataSupport.toJSON()),Object(d["a"])(e,ue.CAMERA,this.cameraDataSupport.toJSON()),Object(d["a"])(e,ue.GEOMETRY,this.geometryDataSupport.toJSON()),Object(d["a"])(e,ue.LIGHT,this.lightDataSupport.toJSON()),Object(d["a"])(e,ue.MATERIAL,this.materialDataSupport.toJSON()),Object(d["a"])(e,ue.MODEL,this.modelDataSupport.toJSON()),Object(d["a"])(e,ue.TEXTURE,this.textureDataSupport.toJSON()),Object(d["a"])(e,ue.CONTROLS,this.controlsDataSupport.toJSON()),e);return JSON.stringify(t)}}]),e}(),Yt=function(){function e(t){var a=this;Object(h["a"])(this,e),E(this,"cameraCompiler"),E(this,"lightCompiler"),E(this,"geometryCompiler"),E(this,"modelCompiler"),E(this,"textureCompiler"),E(this,"materialCompiler"),E(this,"rendererCompiler"),E(this,"sceneCompiler"),E(this,"controlsCompiler"),Object.keys(t).forEach((function(e){a[e]=t[e]}))}return Object(f["a"])(e,[{key:"getObjectVid",value:function(e){for(var t=[this.cameraCompiler,this.lightCompiler,this.modelCompiler],a=0,n=t;a<n.length;a++){var r=n[a],i=r.getSupportVid(e);if(i)return i}return null}},{key:"getMaterial",value:function(e){if(qe(e)){var t=this.materialCompiler;return t.getMap().get(e)}console.warn("compiler manager vid is illeage: ".concat(e))}},{key:"getTexture",value:function(e){if(qe(e)){var t=this.textureCompiler;return t.getMap().get(e)}console.warn("compiler manager vid is illeage: ".concat(e))}}]),e}(),$t=new Map;$t.set("WebGLRenderer",Ve),$t.set("Scene",Oe),$t.set("ModelingScene",he),$t.set("RenderManager",we),$t.set("Stats",ke),$t.set("EffectComposer",Le),$t.set("PointerManager",Te),$t.set("EventManager",Pe),$t.set("OrbitControls",Ce),$t.set("TransformControls",ze);var Xt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this),E(Object(u["a"])(n),"dataSupportManager",new Ut),E(Object(u["a"])(n),"resourceManager",new gt),E(Object(u["a"])(n),"loaderManager",new vt),E(Object(u["a"])(n),"compilerManager"),e&&e.dataSupportManager&&(n.dataSupportManager=e.dataSupportManager),n.loaderManager.addEventListener("loaded",(function(e){n.resourceManager.mappingResource(e.resourceMap)})),n}return Object(f["a"])(a,[{key:"mappingResource",value:function(e){return this.resourceManager.mappingResource(e),this}},{key:"load",value:function(e,t){var a=this,n=function(){var t=a.dataSupportManager;e.texture&&t.load({texture:e.texture}),e.material&&t.load({material:e.material}),delete e.texture,delete e.material,t.load(e)};if(e.assets&&e.assets.length){this.loaderManager.reset().load(e.assets);var r=function r(i){delete e.assets,n(),a.resourceManager.removeEventListener("mapped",r),t&&t(i)};this.resourceManager.addEventListener("mapped",r)}else n(),t&&t()}},{key:"support",value:function(){if(!this.webGLRenderer)return console.warn("support exec must after installed webGLRenderer"),this;if(!this.scene)return console.warn("support exec must after installed some scene"),this;if(!this.renderManager)return console.warn("support exec must after installed renderManager"),this;var e=this.dataSupportManager,t=e.getDataSupport(ue.TEXTURE),a=e.getDataSupport(ue.MATERIAL),n=e.getDataSupport(ue.CAMERA),r=e.getDataSupport(ue.LIGHT),i=e.getDataSupport(ue.GEOMETRY),o=e.getDataSupport(ue.MODEL),s=e.getDataSupport(ue.RENDERER),c=e.getDataSupport(ue.SCENE),u=e.getDataSupport(ue.CONTROLS),l=new Rt({target:t.getData()}),p=new St({target:a.getData()}),d=new yt({target:n.getData(),scene:this.scene,engine:this}),h=new Et({scene:this.scene,target:r.getData()}),f=new wt({target:i.getData()}),m=new Ct({scene:this.scene,target:o.getData()}),v=new xt({target:s.getData(),glRenderer:this.webGLRenderer,engine:this}),g=new kt({target:c.getData(),scene:this.scene}),b=new Ot({target:u.getData(),transformControls:this.transformControls}),y=this.resourceManager;return g.linkTextureMap(l.getMap()),p.linkTextureMap(l.getMap()),m.linkGeometryMap(f.getMap()).linkMaterialMap(p.getMap()).linkObjectMap(h.getMap()).linkObjectMap(d.getMap()).linkObjectMap(m.getMap()),d.linkObjectMap(h.getMap()).linkObjectMap(d.getMap()).linkObjectMap(m.getMap()),l.linkRescourceMap(y.resourceMap),f.linkRescourceMap(y.resourceMap),t.addCompiler(l),a.addCompiler(p),n.addCompiler(d),r.addCompiler(h),i.addCompiler(f),o.addCompiler(m),s.addCompiler(v),c.addCompiler(g),u.addCompiler(b),this.compilerManager=new Yt({textureCompiler:l,materialCompiler:p,cameraCompiler:d,lightCompiler:h,geometryCompiler:f,modelCompiler:m,rendererCompiler:v,sceneCompiler:g,controlsCompiler:b}),this}},{key:"install",value:function(e,t){return a.pluginHandler.has(e)?a.pluginHandler.get(e).call(this,t):console.error("EngineSupport can not support ".concat(e," plugin.")),this}}]),a}(Fe),Jt=Xt;E(Jt,"pluginHandler",$t);var Zt,qt=function(e){Object(l["a"])(a,e);var t=Object(p["a"])(a);function a(e){var n;return Object(h["a"])(this,a),n=t.call(this,e),n.install(Ne.WEBGLRENDERER,{antialias:!0,alpha:!0}).install(Ne.MODELINGSCENE,{hasDefaultPerspectiveCamera:!0,hasDefaultOrthographicCamera:!0,hasAxesHelper:!0,hasGridHelper:!0,hasDisplayMode:!0,displayMode:"env"}).install(Ne.RENDERMANAGER).install(Ne.STATS).install(Ne.EFFECTCOMPOSER,{WebGLMultisampleRenderTarget:!0}).install(Ne.ORBITCONTROLS).install(Ne.POINTERMANAGER).install(Ne.EVENTMANAGER).install(Ne.TRANSFORMCONTROLS).support(),n}return Object(f["a"])(a)}(Jt),Kt=function(){function e(){Object(h["a"])(this,e),E(this,"supportData"),E(this,"supportDataType")}return Object(f["a"])(e,[{key:"create",value:function(e){return e?(this.supportData={},this.supportDataType=e,this):(console.warn("you must give a module type in create params"),this)}},{key:"add",value:function(t){return this.supportData&&this.supportDataType?t.type?e.configModelMap[t.type]!==this.supportDataType?(console.warn("current generator create config which module is in: ".concat(this.supportDataType,", but you provide type is '").concat(t.type,"'")),this):(this.supportData[t.vid]=Z(t.type,t),this):(console.warn("config can not found attribute 'type'"),this):(console.warn("you must call 'create' method before the 'add' method"),this)}},{key:"get",value:function(){return this.supportDataType=void 0,this.supportData?this.supportData:{}}}]),e}(),Qt=Kt;E(Qt,"configModelMap",Ue()),function(e){e["ACTIVE"]="active",e["HOVER"]="hover"}(Zt||(Zt={}));var ea=new v["bb"]("rgb(255, 255, 255)",.5,200,1);ea.position.set(-30,5,20),ea.castShadow=!0;var ta=new v["M"](new v["c"](80,2,80),new v["Q"]({color:"rgb(255, 255, 255)"}));ta.position.set(0,-11,0),ta.receiveShadow=!0,ta.castShadow=!0;var aa=function(){function e(t){Object(h["a"])(this,e),E(this,"material"),E(this,"dom"),E(this,"renderer"),E(this,"scene"),E(this,"camera"),E(this,"object");var a=new v["Cb"]({antialias:!0,preserveDrawingBuffer:!0});a.setPixelRatio(window.devicePixelRatio),a.setClearColor("rgb(150, 150, 150)"),a.shadowMap.enabled=!0,a.shadowMap.type=v["Y"];var n=new v["ib"],r=new v["Z"](45,window.innerWidth/window.innerHeight,1,500);r.position.set(0,0,35),r.up.x=0,r.up.y=1,r.up.z=0,r.lookAt(new v["zb"](0,0,0)),n.add(e.ambientLight),n.add(e.pointLight),n.add(e.plane),this.scene=n,this.renderer=a,this.camera=r,this.object=new v["T"],(null==t?void 0:t.material)&&this.setMaterial(t.material),(null==t?void 0:t.dom)&&this.setDom(t.dom)}return Object(f["a"])(e,[{key:"setMaterial",value:function(t){if(this.scene.remove(this.object),this.material=t,t.type.includes("Mesh"))this.object=new v["M"](e.geometry,t);else if(t.type.includes("Line"))this.object=new v["B"](e.geometry,t);else if(t.type.includes("Ponits"))this.object=new v["cb"](e.geometry,t);else{if(!t.type.includes("Sprite"))return console.warn("material displayer can not support this type material: '".concat(t.type,"'")),this;this.object=new v["pb"](t)}return this.object.castShadow=!0,this.object.receiveShadow=!0,this.scene.add(this.object),this}},{key:"setDom",value:function(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}},{key:"setSize",value:function(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("material displayer must set dom before setSize with empty parameters"),this;var a=this.dom;this.camera.aspect=a.offsetWidth/a.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(a.offsetWidth,a.offsetHeight,!0)}return this}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"dispose",value:function(){this.renderer.dispose()}}]),e}(),na=aa;E(na,"ambientLight",new v["a"]("rgb(255, 255, 255)",.7)),E(na,"pointLight",ea),E(na,"geometry",new v["lb"](10,12,12)),E(na,"plane",ta),E(na,"dispose",(function(){aa.geometry.dispose(),aa.plane.geometry.dispose()}));var ra=function(){function e(t){Object(h["a"])(this,e),E(this,"dom"),E(this,"texture"),E(this,"renderer"),E(this,"scene"),E(this,"camera");var a=new v["Cb"]({antialias:!0,preserveDrawingBuffer:!0});a.setPixelRatio(window.devicePixelRatio),a.setClearColor("rgb(150, 150, 150)"),a.shadowMap.enabled=!0,a.shadowMap.type=v["Y"];var n=new v["ib"],r=new v["Z"](45,window.innerWidth/window.innerHeight,1,500);r.position.set(0,0,35),r.up.x=0,r.up.y=1,r.up.z=0,r.lookAt(new v["zb"](0,0,0)),n.add(e.ambientLight),this.scene=n,this.renderer=a,this.camera=r,(null==t?void 0:t.texture)&&this.setTexture(t.texture),(null==t?void 0:t.dom)&&this.setDom(t.dom)}return Object(f["a"])(e,[{key:"setTexture",value:function(e){return this.scene.background=e,this}},{key:"setDom",value:function(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}},{key:"setSize",value:function(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("texture displayer must set dom before setSize with empty parameters"),this;var a=this.dom;this.camera.aspect=a.offsetWidth/a.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(a.offsetWidth,a.offsetHeight,!0)}return this}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"dispose",value:function(){this.renderer.dispose()}}]),e}(),ia=ra;E(ia,"ambientLight",new v["a"]("rgb(255, 255, 255)",1))}});