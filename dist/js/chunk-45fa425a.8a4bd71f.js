(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45fa425a"],{"0189":function(t,e,i){"use strict";i("91e3")},"2fdd":function(t,e,i){"use strict";i("9305")},"597a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collapseLayout-container"},[i("div",{staticClass:"collapseLayout-title",on:{click:t.toggle}},["left"===t.arrowPosition?i("vis-icon",{class:{"icon-open":!t.showCollapse},staticStyle:{"margin-right":"5px"},attrs:{code:"#iconjian"}}):t._e(),i("div",{staticClass:"title-box"},[t.showIcon?i("vis-icon",{attrs:{code:t.icon}}):t._e(),i("span",{domProps:{textContent:t._s(t.label)}})],1),"right"===t.arrowPosition?i("vis-icon",{class:{"icon-open":!t.showCollapse},attrs:{code:"#iconjian"}}):t._e()],1),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showCollapse,expression:"showCollapse"}],staticClass:"collapseLayout-main"},[t._t("container")],2)])],1)},s=[],n={name:"collapse-layout",props:{icon:{type:String,default:"#iconmoxing"},showIcon:{type:Boolean,default:!0},label:{type:String,default:"折叠面板布局"},fold:{type:Boolean,default:!1},arrowPosition:{type:String,default:"right"}},data:function(){return{showCollapse:!0}},watch:{fold:{handler:function(t){this.showCollapse=!t},immediate:!0}},methods:{toggle:function(){this.showCollapse=!this.showCollapse,this.$emit("change",this.showCollapse)}}},a=n,r=(i("2fdd"),i("2877")),l=Object(r["a"])(a,o,s,!1,null,"6aabd072",null);e["a"]=l.exports},"6fab":function(t,e,i){"use strict";i("a9e3"),i("fb6a");var o,s,n={name:"drag-plane",props:{height:{type:String,default:"500px"},width:{type:String,default:"300px"},direction:{type:String,default:"column"},amount:{type:Number,default:2},safeDistance:{type:Number,default:24},boxSaveDistance:{type:Number,default:100},showDragsign:{type:Boolean,default:!0},dragTop:{type:Boolean,default:!1},dragBottom:{type:Boolean,default:!1},dragLeft:{type:Boolean,default:!1},dragRight:{type:Boolean,default:!1}},data:function(){return{spaceData:{},showInnerMask:!1,showOutMask:!1,lineDirection:"",boxWidth:"",boxHight:"",mouseX:"",mouseY:"",touchNum:""}},render:function(t){var e=this,i={class:"dragFlexPanel-drag"},o={class:"dragFlexPanel-view"},s=t("div",{class:{"dragFlexPanel-line":!0,"dragFlexPanel-line-sign":this.showDragsign},style:"row"===this.direction?"height: 100%;width: 3px;right: 0;top: 0;":"width: 100%;height: 3px;left: 0;bottom: 0;",on:{mousedown:this.dragLineMouseDown}}),n=t("div",{attrs:{id:"drag".concat(this.amount),class:"".concat(i.class)},ref:"drag".concat(this.amount)},[t("div",{class:o.class},[this.$slots["view1"]]),s]),a=function a(r){if(r===e.amount)return n;var l=t("div",{attrs:{class:o.class}},e.$slots["view".concat(e.amount-r+1)]);return t("div",{attrs:{id:"drag".concat(r),class:i.class,style:"flex-direction: ".concat(e.direction,";")},ref:"drag".concat(r)},[a(r+1),l,s])},r=t("div",{attrs:{class:"dragFlexPanel-mask-inner"},style:{display:this.showInnerMask?"block":"none"},on:{mousemove:this.innerMaskMouseMove,mouseup:this.innerMaskMouseUp,mouseleave:this.innerMaskMouseLeave},ref:"innerMask"}),l=t("div",{attrs:{class:"dragFlexPanel-mask-outer"},style:{display:this.showOutMask?"block":"none",cursor:"top"===this.lineDirection||"bottom"===this.lineDirection?"ns-resize":"ew-resize"},on:{mousemove:this.outerMaskMouseMove,mouseup:this.outerMaskMouseUp,mouseleave:this.outerMaskMouseLeave},ref:"outerMask"}),c=t("div",{attrs:{style:"top: 0;left: 0;width: 100%;cursor: ns-resize;"},style:{display:this.dragTop?"black":"none"},class:{"dragFlexPanel-boxLine":!0,"dragFlexPanel-boxLine-n":this.dragTop,"dragFlexPanel-boxLine-n-sign":this.dragTop&&this.showDragsign},ref:"boxLine-top",on:{mousedown:function(t){return e.boxLineMouseDown(t,"top")}}}),u=t("div",{attrs:{style:"bottom: 0;left: 0;width: 100%;cursor: ns-resize;"},style:{display:this.dragBottom?"black":"none"},class:{"dragFlexPanel-boxLine":!0,"dragFlexPanel-boxLine-s":this.dragBottom,"dragFlexPanel-boxLine-s-sign":this.dragBottom&&this.showDragsign},ref:"boxLine-bottom",on:{mousedown:function(t){return e.boxLineMouseDown(t,"bottom")}}}),h=t("div",{attrs:{style:"top: 0;left: 0;height: 100%;cursor: ew-resize;"},style:{display:this.dragLeft?"black":"none"},class:{"dragFlexPanel-boxLine":!0,"dragFlexPanel-boxLine-w":this.dragLeft,"dragFlexPanel-boxLine-w-sign":this.dragLeft&&this.showDragsign},ref:"boxLine-left",on:{mousedown:function(t){return e.boxLineMouseDown(t,"left")}}}),d=t("div",{attrs:{style:"top: 0;right: 0;height: 100%;cursor: ew-resize;"},style:{display:this.dragRight?"black":"none"},class:{"dragFlexPanel-boxLine":!0,"dragFlexPanel-boxLine-e":this.dragRight,"dragFlexPanel-boxLine-e-sign":this.dragRight&&this.showDragsign},ref:"boxLine-right",on:{mousedown:function(t){return e.boxLineMouseDown(t,"right")}}});return t("div",{attrs:{class:"dragFlexPanel-box"},style:{flexDriection:this.direction,width:this.boxWidth,height:this.boxHeight,borderTopWidth:this.dragTop?"":"1px",borderBottomWidth:this.dragBottom?"":"1px",borderLeftWidth:this.dragLeft?"":"1px",borderRightWidth:this.dragRight?"":"1px"},ref:"box"},[a(1),r,l,c,u,h,d])},methods:{setDistance:function(){var t=this.$refs.box.offsetHeight/this.amount;t||(t=parseInt(this.$refs.box.style.height)/this.amount);for(var e=2;e<=this.amount;e+=1){var i=t*(this.amount-e+1);this.$refs["drag".concat(e)].style.height="".concat(i,"px"),this.spaceData[e]=i}},dragLineMouseDown:function(t){t.preventDefault(),t.target.classList.add("dragFlexPanel-line-click"),this.touchNum=t.target.parentNode.id.slice(4),this.showInnerMask=!0},innerMaskMouseMove:function(t){if(t.preventDefault(),"row"===this.direction)this.$refs["drag".concat(this.touchNum)].style.height=t.offsetX;else{var e=t.offsetY,i=(this.spaceData[parseInt(this.touchNum)+1]||0)+this.safeDistance,o=(this.spaceData[parseInt(this.touchNum)-1]||this.$refs.box.offsetHeight)-this.safeDistance;this.$refs["drag".concat(this.touchNum)].style.height="".concat(e<=i?i:e>=o?o:e,"px"),this.spaceData[this.touchNum]=parseInt(this.$refs["drag".concat(this.touchNum)].style.height)}},innerMaskMouseLeave:function(t){t.preventDefault(),this.innerMaskMouseUp()},innerMaskMouseUp:function(t){this.showInnerMask=!1;var e=this.$refs["drag".concat(this.touchNum)].lastElementChild;e.classList.remove("dragFlexPanel-line-click")},boxLineMouseDown:function(t,e){t.preventDefault(),this.showOutMask=!0,this.mouseX=t.clientX,this.mouseY=t.clientY,this.lineDirection=e,this.$refs["boxLine-".concat(this.lineDirection)].classList.add("dragFlexPanel-boxLine-click")},outerMaskMouseMove:function(t){t.preventDefault();var e=t.clientX-this.mouseX,i=t.clientY-this.mouseY;if("top"===this.lineDirection||"bottom"===this.lineDirection){var o=parseFloat(this.boxHeight)+i;"column"===this.direction?o<=this.spaceData[2]+this.boxSaveDistance?this.$refs.box.style.height=this.spaceData[2]+this.boxSaveDistance:this.$refs.box.style.height="".concat(o,"px"):o<=this.boxSaveDistance?this.$refs.box.style.height=this.boxSaveDistance:this.$refs.box.style.height="".concat(o,"px")}else if("right"===this.lineDirection||"left"===this.lineDirection){var s=parseFloat(this.boxWidth)+e;"row"===this.direction||(s<=this.boxSaveDistance?this.$refs.box.style.width=this.boxSaveDistance:this.$refs.box.style.width="".concat(s,"px"))}},outerMaskMouseLeave:function(t){t.preventDefault(),this.outerMaskMouseUp()},outerMaskMouseUp:function(t){this.showOutMask=!1,this.boxWidth=this.$refs.box.style.width,this.boxHeight=this.$refs.box.style.height,this.$refs["boxLine-".concat(this.lineDirection)].classList.remove("dragFlexPanel-boxLine-click")}},watch:{height:function(t,e){this.boxHight=t},width:function(t,e){this.boxWidth=t}},created:function(){this.boxWidth=this.width,this.boxHeight=this.height},mounted:function(){this.setDistance()}},a=n,r=(i("f171"),i("2877")),l=Object(r["a"])(a,o,s,!1,null,null,null);e["a"]=l.exports},"91e3":function(t,e,i){},9305:function(t,e,i){},a8f9:function(t,e,i){},b19d:function(t,e,i){},c766:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"texture-container"},[i("drag-plane",{attrs:{amount:2,width:"100%",height:t.height+"px",showDragsign:!1},scopedSlots:t._u([{key:"view1",fn:function(){return[i("div",{staticClass:"box-header"},[i("el-input",{attrs:{size:"mini","prefix-icon":"el-icon-search",placeholder:"贴图筛选"}}),i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.addtexture}},[i("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus-outline",type:"primary"}},[t._v(" 添加贴图 ")]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.texture,(function(e,o){return i("el-dropdown-item",{key:o,attrs:{command:e},domProps:{textContent:t._s(e.label)}})})),1)],1)],1),i("div",{staticClass:"box-container"},[i("div",{staticClass:"texture-main"},t._l(t.textureList,(function(e,o){return i("div",{key:o,staticClass:"texture-elem"},[i("div",{ref:e.vid,refInFor:!0,staticClass:"render-box",class:{active:t.active.vid===e.vid},attrs:{id:e.vid},on:{click:function(){t.$store.commit("texture/setCurrentTexture",e.vid)}}}),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"删除",expression:"'删除'",modifiers:{top:!0}}],staticClass:"operate-box"},[i("vis-icon",{attrs:{code:"#iconshanchu"}})],1),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.vid,expression:"item.vid",modifiers:{bottom:!0}}],staticClass:"element-title",domProps:{textContent:t._s(e.vid)}})])})),0)])]},proxy:!0},{key:"view2",fn:function(){return[i("texture-setting-module")]},proxy:!0}])})],1)},s=[],n=(i("a9e3"),i("6fab")),a=i("35bb"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.config?i("div",{staticClass:"textureSettingModule-container"},[i("collapse-layout",{attrs:{label:"贴图",icon:"#icontietushezhi",arrowPosition:"left"},scopedSlots:t._u([{key:"container",fn:function(){return[i("vis-controller-input",{attrs:{label:"名称"},model:{value:t.config.vid,callback:function(e){t.$set(t.config,"vid",e)},expression:"config.vid"}}),i("vis-controller-input",{attrs:{label:"类型",disabled:""},model:{value:t.config.type,callback:function(e){t.$set(t.config,"type",e)},expression:"config.type"}})]},proxy:!0}],null,!1,2916784630)}),i("collapse-layout",{attrs:{label:"基础设置",icon:"#iconshezhi",arrowPosition:"left"},scopedSlots:t._u([{key:"container",fn:function(){return[i("vis-controller-number",{attrs:{label:"旋转",step:1,dragMultply:3,min:0,max:360,unit:"°",displayAccuracy:0},model:{value:t.rotation,callback:function(e){t.rotation=e},expression:"rotation"}}),i("vis-controller-number",{attrs:{label:"中心点x",step:.01,dragMultply:3,displayAccuracy:2},model:{value:t.config.center.x,callback:function(e){t.$set(t.config.center,"x",e)},expression:"config.center.x"}}),i("vis-controller-number",{attrs:{label:"中心点y",step:.01,dragMultply:3,displayAccuracy:2},model:{value:t.config.center.y,callback:function(e){t.$set(t.config.center,"y",e)},expression:"config.center.y"}}),i("vis-controller-select",{attrs:{label:"x包裹",options:t.warp},model:{value:t.config.wrapS,callback:function(e){t.$set(t.config,"wrapS",e)},expression:"config.wrapS"}}),t.config.wrapS!==t.warp[0].value?i("vis-controller-number",{attrs:{label:"x重复",step:1,min:1,dragMultply:2},model:{value:t.config.repeat.x,callback:function(e){t.$set(t.config.repeat,"x",e)},expression:"config.repeat.x"}}):t._e(),i("vis-controller-select",{attrs:{label:"y包裹",options:t.warp},model:{value:t.config.wrapT,callback:function(e){t.$set(t.config,"wrapT",e)},expression:"config.wrapT"}}),t.config.wrapS!==t.warp[0].value?i("vis-controller-number",{attrs:{label:"y重复",step:1,min:1,dragMultply:2},model:{value:t.config.repeat.y,callback:function(e){t.$set(t.config.repeat,"y",e)},expression:"config.repeat.y"}}):t._e(),i("vis-controller-number",{attrs:{label:"x偏移",step:.01,min:0,max:1,dragMultply:3,displayAccuracy:2},model:{value:t.config.offset.x,callback:function(e){t.$set(t.config.offset,"x",e)},expression:"config.offset.x"}}),i("vis-controller-number",{attrs:{label:"y偏移",step:.01,min:0,max:1,dragMultply:3,displayAccuracy:2},model:{value:t.config.offset.y,callback:function(e){t.$set(t.config.offset,"y",e)},expression:"config.offset.y"}})]},proxy:!0}],null,!1,3141550096)}),i(t.type,{tag:"components",attrs:{config:t.config}})],1):t._e()},l=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ImageTexture-container"})},u=[],h={props:{config:{type:Object,required:!0}},computed:{}},d=h,f=i("2877"),p=Object(f["a"])(d,c,u,!1,null,"0fea0e04",null),g=p.exports,x=i("597a"),m=i("5a89"),b={components:{collapseLayout:x["a"],ImageTexture:g},data:function(){return{warp:[{label:"末尾延展",value:m["a"]},{label:"重复覆盖",value:m["d"]},{label:"镜像覆盖",value:m["c"]}]}},computed:{config:function(){return this.$store.getters["texture/currentTexture"]},type:function(){return!!this.config&&this.config.type},rotation:{get:function(){return 180*this.config.rotation/Math.PI},set:function(t){this.config.rotation=t*Math.PI/180}}},methods:{}},v=b,y=(i("0189"),Object(f["a"])(v,r,l,!1,null,"39267fbf",null)),w=y.exports,M=i("fe9e"),k=i("ec26"),D={components:{dragPlane:n["a"],textureSettingModule:w},props:{height:{type:Number}},data:function(){return{texture:[{icon:"#icontexture",label:"图片贴图",texture:M["a"].IMAGETEXTURE}],displayerMap:{},watchMap:{}}},computed:{textureList:function(){return this.$store.getters["texture/get"]},active:function(){return this.$store.getters["texture/currentTexture"]}},methods:{addtexture:function(t){var e=this;this.$prompt("输入贴图http资源地址：","".concat(t.label),{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(i){var o=i.value;a["a"].load({assets:[o]},(function(i){var s=Object(M["r"])(t.texture,{vid:Object(k["a"])(),url:o});e.$store.commit("texture/add",s),e.$nextTick((function(){var t=s.vid;if(!e.$refs[t])return console.error("can not found this dom: '".concat(t,"'")),!1;var i=new M["q"]({dom:e.$refs[t][0],texture:a["a"].compilerManager.getTexture(t)});i.render(),e.displayerMap[t]=i,e.watchMap[t]=e.$watch((function(){return this.textureList[t]}),(function(i){e.displayerMap[t].render()}),{deep:!0})}))}))}))}}},L=D,$=(i("fa03"),Object(f["a"])(L,o,s,!1,null,"fdc34828",null));e["default"]=$.exports},f171:function(t,e,i){"use strict";i("b19d")},fa03:function(t,e,i){"use strict";i("a8f9")}}]);